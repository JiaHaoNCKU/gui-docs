
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ZMQ Interface &#8212; Open Ephys GUI Docs</title>
    
  <link rel="stylesheet" href="../../_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx_tabs/tabs.css" type="text/css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Developer Guide" href="../../Developer-Guide/index.html" />
    <link rel="prev" title="Virtual Reference" href="Virtual-Reference.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    <a class="navbar-brand" href="../../index.html">
    
      <img src="../../_static/oe_logo_gui.svg" class="logo" alt="logo" />
    
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item active">
            <a class="nav-link" href="../index.html">User Manual</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../Developer-Guide/index.html">Developer Guide</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../Tutorials/index.html">Tutorials</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../FAQ/index.html">FAQs</a>
        </li>
        
        
      </ul>


      

      <ul class="navbar-nav">
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/open-ephys" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square"></i></span>
            </a>
          </li>
        
        
          <li class="nav-item">
            <a class="nav-link" href="https://twitter.com/openephys" target="_blank" rel="noopener">
              <span><i class="fab fa-twitter-square"></i></span>
            </a>
          </li>
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

    <div class="bd-toc-item active">
    
  
    <ul class="nav bd-sidenav">
        
        
          
            
                <li class="">
                    <a href="../Before-you-begin.html">Before you begin</a>
                </li>
            
          
            
                <li class="">
                    <a href="../Hardware-requirements.html">Hardware requirements</a>
                </li>
            
          
            
                <li class="">
                    <a href="../Installing-the-GUI.html">Installing the GUI</a>
                </li>
            
          
            
                <li class="">
                    <a href="../Exploring-the-user-interface.html">Exploring the user interface</a>
                </li>
            
          
            
                <li class="">
                    <a href="../Building-a-signal-chain.html">Building a signal chain</a>
                </li>
            
          
            
                <li class="">
                    <a href="../Recording-data/index.html">Recording data</a>
                </li>
            
          
            
                <li class="">
                    <a href="../Remote-control.html">Remote control</a>
                </li>
            
          
            
                <li class="">
                    <a href="../Whats-new-in-version-06X.html">What’s new in version 0.6.X</a>
                </li>
            
          
            
  
                <li class="active">
                    <a href="index.html">Plugins</a>
                    <ul>
                    
                        <li class="">
                            <a href="Arduino-Output.html">Arduino Output</a>
                        </li>
                    
                        <li class="">
                            <a href="Audio-Monitor.html">Audio Monitor</a>
                        </li>
                    
                        <li class="">
                            <a href="Bandpass-Filter.html">Bandpass Filter</a>
                        </li>
                    
                        <li class="">
                            <a href="Channel-Map.html">Channel Map</a>
                        </li>
                    
                        <li class="">
                            <a href="Common-Average-Reference.html">Common Average Reference</a>
                        </li>
                    
                        <li class="">
                            <a href="Crossing-Detector.html">Crossing Detector</a>
                        </li>
                    
                        <li class="">
                            <a href="Ephys-Socket.html">Ephys Socket</a>
                        </li>
                    
                        <li class="">
                            <a href="Event-Broadcaster.html">Event Broadcaster</a>
                        </li>
                    
                        <li class="">
                            <a href="Event-Translator.html">Event Translator</a>
                        </li>
                    
                        <li class="">
                            <a href="Falcon-Output.html">Falcon Output</a>
                        </li>
                    
                        <li class="">
                            <a href="File-Reader.html">File Reader</a>
                        </li>
                    
                        <li class="">
                            <a href="LFP-Viewer.html">LFP Viewer</a>
                        </li>
                    
                        <li class="">
                            <a href="MATLAB-Interface.html">MATLAB Interface</a>
                        </li>
                    
                        <li class="">
                            <a href="Merger.html">Merger</a>
                        </li>
                    
                        <li class="">
                            <a href="Multiband-Integrator.html">Multi-Band Integrator</a>
                        </li>
                    
                        <li class="">
                            <a href="Network-Events.html">Network Events</a>
                        </li>
                    
                        <li class="">
                            <a href="Neuropixels-CAR.html">Neuropixels CAR</a>
                        </li>
                    
                        <li class="">
                            <a href="Neuropixels-PXI.html">Neuropixels PXI</a>
                        </li>
                    
                        <li class="">
                            <a href="NIDAQmx.html">NI-DAQmx</a>
                        </li>
                    
                        <li class="">
                            <a href="Online-PSTH.html">Online PSTH</a>
                        </li>
                    
                        <li class="">
                            <a href="Phase-Calculator.html">Phase Calculator</a>
                        </li>
                    
                        <li class="">
                            <a href="Phase-Detector.html">Phase Detector</a>
                        </li>
                    
                        <li class="">
                            <a href="Probe-Viewer.html">Probe Viewer</a>
                        </li>
                    
                        <li class="">
                            <a href="Pulse-Pal.html">Pulse Pal</a>
                        </li>
                    
                        <li class="">
                            <a href="Record-Control.html">Record Control</a>
                        </li>
                    
                        <li class="">
                            <a href="Rhythm-Plugins.html">Rhythm Plugins</a>
                        </li>
                    
                        <li class="">
                            <a href="Spectrum-Viewer.html">Spectrum Viewer</a>
                        </li>
                    
                        <li class="">
                            <a href="Spike-Detector.html">Spike Detector</a>
                        </li>
                    
                        <li class="">
                            <a href="Spike-Sorter.html">Spike Sorter</a>
                        </li>
                    
                        <li class="">
                            <a href="Spike-Viewer.html">Spike Viewer</a>
                        </li>
                    
                        <li class="">
                            <a href="Splitter.html">Splitter</a>
                        </li>
                    
                        <li class="">
                            <a href="Tracking-Plugin.html">Tracking Plugin</a>
                        </li>
                    
                        <li class="">
                            <a href="Virtual-Reference.html">Virtual Reference</a>
                        </li>
                    
                        <li class="active">
                            <a href="">ZMQ Interface</a>
                        </li>
                    
                    </ul>
                </li>
            
          
        
        
        
        
        
        
        
        
      </ul>
  
  </nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#installing-and-upgrading" class="nav-link">Installing and upgrading</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#plugin-configuration" class="nav-link">Plugin Configuration</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#data-packets" class="nav-link">Data Packets</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#message-envelope" class="nav-link">Message Envelope</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#message-header" class="nav-link">Message Header</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h4">
            <a href="#continuous-data" class="nav-link">Continuous data</a>
        </li>
    
        <li class="nav-item toc-entry toc-h4">
            <a href="#event-data" class="nav-link">Event data</a>
        </li>
    
        <li class="nav-item toc-entry toc-h4">
            <a href="#spike-data" class="nav-link">Spike data</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#message-data" class="nav-link">Message Data</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#example-code" class="nav-link">Example Code</a>
        </li>
    
    </ul>
</nav>


              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="zmq-interface">
<span id="zmqinterface"></span><h1>ZMQ Interface<a class="headerlink" href="#zmq-interface" title="Permalink to this headline">¶</a></h1>
<img alt="ZMQ interface" src="../../_images/zmqinterface-01.png" />
<table class="colwidths-given table" id="id1">
<caption><span class="caption-text">Sends continuous data, events, and spikes to external applications using the ZeroMQ library, making it possible to create advanced visualization and monitoring add-ons, such as <a class="reference external" href="https://github.com/hangyabalazs/opeth">OPETH</a></span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 18%" />
<col style="width: 82%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><em>Plugin Type</em></p></td>
<td><p>Sink</p></td>
</tr>
<tr class="row-even"><td><p><em>Platforms</em></p></td>
<td><p>Windows, Linux, macOS</p></td>
</tr>
<tr class="row-odd"><td><p><em>Built in?</em></p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p><em>Key Developers</em></p></td>
<td><p>Francesco Battaglia, András Széll, Anjal Doshi</p></td>
</tr>
<tr class="row-odd"><td><p><em>Source Code</em></p></td>
<td><p><a class="reference external" href="https://github.com/open-ephys-plugins/zmq-interface">https://github.com/open-ephys-plugins/zmq-interface</a></p></td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The client application may be written in any language/platform supporting ZeroMQ.</p>
</div>
<div class="section" id="installing-and-upgrading">
<h2>Installing and upgrading<a class="headerlink" href="#installing-and-upgrading" title="Permalink to this headline">¶</a></h2>
<p>The ZMQ Interface plugin is not included by default in the Open Ephys GUI. To install, use <strong>ctrl-P</strong> or <strong>⌘P</strong> to access the Plugin Installer, browse to the “ZMQ Interface” plugin, and click the “Install” button.</p>
<p>The Plugin Installer also allows you to upgrade to the latest version of this plugin, if it’s already installed.</p>
</div>
<div class="section" id="plugin-configuration">
<h2>Plugin Configuration<a class="headerlink" href="#plugin-configuration" title="Permalink to this headline">¶</a></h2>
<p>The plugin editor contains three editable parameters:</p>
<ol class="arabic simple">
<li><p><strong>Stream:</strong> Select an incoming data stream to use. Each ZMQ Interface plugin can only send one stream at a time. To send data from multiple streams, place several plugins in series.</p></li>
<li><p><strong>Channels:</strong> The continuous data channels to send (all are selected by default).</p></li>
<li><p><strong>Data Port:</strong> Port number for the ZMQ socket.</p></li>
</ol>
<p>The editor also shows a list of clients connected to the plugin via the listening port (5557). If a client is successfully connected, then its name will show up in green in the list once acquisition has started. If the client disconnects while acquisition is active, its name will turn red.</p>
</div>
<div class="section" id="data-packets">
<h2>Data Packets<a class="headerlink" href="#data-packets" title="Permalink to this headline">¶</a></h2>
<p>The ZMQ Interface send multi-part ZMQ messages. Each message consists of three parts:</p>
<div class="section" id="message-envelope">
<h3>Message Envelope<a class="headerlink" href="#message-envelope" title="Permalink to this headline">¶</a></h3>
<p>Contains the type of message being received (<code class="code docutils literal notranslate"><span class="pre">data</span></code>, <code class="code docutils literal notranslate"><span class="pre">spike</span></code>, or <code class="code docutils literal notranslate"><span class="pre">event</span></code>), as well as the index of the message (<code class="code docutils literal notranslate"><span class="pre">message_num</span></code>).</p>
</div>
<div class="section" id="message-header">
<h3>Message Header<a class="headerlink" href="#message-header" title="Permalink to this headline">¶</a></h3>
<p>A JSON string containing information about the incoming data packet.</p>
<div class="section" id="continuous-data">
<h4>Continuous data<a class="headerlink" href="#continuous-data" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;stream&quot;</span> <span class="p">:</span> <span class="n">stream</span> <span class="n">name</span>
<span class="s2">&quot;channel_num&quot;</span> <span class="p">:</span> <span class="n">local</span> <span class="n">channel</span> <span class="n">index</span>
<span class="s2">&quot;num_samples&quot;</span><span class="p">:</span> <span class="n">num</span> <span class="n">of</span> <span class="n">samples</span> <span class="ow">in</span> <span class="n">this</span> <span class="n">buffer</span>
<span class="s2">&quot;sample_num&quot;</span><span class="p">:</span> <span class="n">index</span> <span class="n">of</span> <span class="n">first</span> <span class="n">sample</span>
<span class="s2">&quot;sample_rate&quot;</span><span class="p">:</span> <span class="n">sampling</span> <span class="n">rate</span> <span class="n">of</span> <span class="n">this</span> <span class="n">channel</span>
</pre></div>
</div>
</div>
<div class="section" id="event-data">
<h4>Event data<a class="headerlink" href="#event-data" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;stream&quot;</span> <span class="p">:</span> <span class="n">stream</span> <span class="n">name</span>
<span class="s2">&quot;source_node&quot;</span> <span class="p">:</span> <span class="n">processor</span> <span class="n">ID</span> <span class="n">that</span> <span class="n">generated</span> <span class="n">the</span> <span class="n">event</span>
<span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">specifies</span> <span class="n">TTL</span> <span class="n">vs</span><span class="o">.</span> <span class="n">message</span><span class="p">,</span>
<span class="s2">&quot;sample_num&quot;</span><span class="p">:</span> <span class="n">index</span> <span class="n">of</span> <span class="n">the</span> <span class="n">event</span>
</pre></div>
</div>
</div>
<div class="section" id="spike-data">
<h4>Spike data<a class="headerlink" href="#spike-data" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;stream&quot;</span> <span class="p">:</span> <span class="n">stream</span> <span class="n">name</span>
<span class="s2">&quot;source_node&quot;</span> <span class="p">:</span> <span class="n">processor</span> <span class="n">ID</span> <span class="n">that</span> <span class="n">generated</span> <span class="n">the</span> <span class="n">spike</span>
<span class="s2">&quot;electrode&quot;</span> <span class="p">:</span> <span class="n">name</span> <span class="n">of</span> <span class="n">the</span> <span class="n">spike</span> <span class="n">channel</span>
<span class="s2">&quot;sample_num&quot;</span> <span class="p">:</span> <span class="n">index</span> <span class="n">of</span> <span class="n">the</span> <span class="n">peak</span> <span class="n">sample</span>
<span class="s2">&quot;num_channels&quot;</span> <span class="p">:</span> <span class="n">total</span> <span class="n">number</span> <span class="n">of</span> <span class="n">channels</span> <span class="ow">in</span> <span class="n">this</span> <span class="n">spike</span>
<span class="s2">&quot;num_samples&quot;</span> <span class="p">:</span> <span class="n">total</span> <span class="n">number</span> <span class="n">of</span> <span class="n">samples</span> <span class="ow">in</span> <span class="n">this</span> <span class="n">spike</span>
<span class="s2">&quot;sorted_id&quot;</span> <span class="p">:</span> <span class="nb">sorted</span> <span class="n">ID</span> <span class="p">(</span><span class="n">default</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="s2">&quot;threshold&quot;</span> <span class="p">:</span> <span class="n">threshold</span> <span class="n">values</span> <span class="n">across</span> <span class="nb">all</span> <span class="n">channels</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="message-data">
<h3>Message Data<a class="headerlink" href="#message-data" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><table class="colwidths-given table">
<colgroup>
<col style="width: 23%" />
<col style="width: 77%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Continuous</strong></p></td>
<td><p>Continuous data from one channel</p></td>
</tr>
<tr class="row-even"><td><p><strong>TTL Event</strong></p></td>
<td><p>Event data (in order) = {1Byte: ‘Event Line’, 1 Byte: ‘Event state(0 or 1)’, 8 Bytes:’TTL Word’}</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Spike</strong></p></td>
<td><p>Spike waveform</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
</div>
<div class="section" id="example-code">
<h2>Example Code<a class="headerlink" href="#example-code" title="Permalink to this headline">¶</a></h2>
<p>The example code for receiving continuous data is written in Python, although in principle it should be possible from any language supporting ZeroMQ.</p>
<p>In the <strong>Resources/python_client</strong> directory of the plugin repository, there is an example Python client called <code class="code docutils literal notranslate"><span class="pre">simple_plotter_zmq.py`</span></code> which plots the continuous data received from the Open Ephys GUI over a network port (see image below).</p>
<img alt="ZMQ Client in Python" src="../../_images/zmqinterface-02.png" />
<p>In addition to receiving and processing data, each client app must use a heartbeat protocol to maintain the connection with the ZMQ Interface plugin.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="Virtual-Reference.html" title="previous page">Virtual Reference</a>
    <a class='right-next' id="next-link" href="../../Developer-Guide/index.html" title="next page">Developer Guide</a>

              </div>
              
          </main>
          

      </div>
    </div>

    
  <script src="../../_static/js/index.3da636dd464baa7582d2.js"></script>


    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2010-2022, Open Ephys &amp; Contributors.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.3.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>