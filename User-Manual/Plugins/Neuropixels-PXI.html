
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Neuropixels PXI &#8212; Open Ephys Documentation 0.0.0 documentation</title>
    
  <link rel="stylesheet" href="../../_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/_static/theme_overrides.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx_tabs/tabs.css" type="text/css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="NIDAQmx" href="NIDAQmx.html" />
    <link rel="prev" title="Neuropixels 3a" href="Neuropixels-3a.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    <a class="navbar-brand" href="../../index.html">
    
      <img src="../../_static/oe_logo_circle.svg" class="logo" alt="logo" />
    
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item active">
            <a class="nav-link" href="../index.html">User Manual</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../Developer-Guide/index.html">Developer Guide</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../Tutorials/index.html">Tutorials</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../FAQ/index.html">FAQ</a>
        </li>
        
        
      </ul>


      

      <ul class="navbar-nav">
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/open-ephys" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square"></i></span>
            </a>
          </li>
        
        
          <li class="nav-item">
            <a class="nav-link" href="https://twitter.com/openephys" target="_blank" rel="noopener">
              <span><i class="fab fa-twitter-square"></i></span>
            </a>
          </li>
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

    <div class="bd-toc-item active">
    
  
    <ul class="nav bd-sidenav">
        
        
          
            
                <li class="">
                    <a href="../Before-you-begin.html">Before you begin</a>
                </li>
            
          
            
                <li class="">
                    <a href="../Hardware-requirements.html">Hardware requirements</a>
                </li>
            
          
            
                <li class="">
                    <a href="../Installing-the-GUI.html">Installing the GUI</a>
                </li>
            
          
            
                <li class="">
                    <a href="../Exploring-the-user-interface.html">Exploring the user interface</a>
                </li>
            
          
            
                <li class="">
                    <a href="../Building-a-signal-chain.html">Building a signal chain</a>
                </li>
            
          
            
                <li class="">
                    <a href="../Recording-data/index.html">Recording data</a>
                </li>
            
          
            
  
                <li class="active">
                    <a href="index.html">Plugins</a>
                    <ul>
                    
                        <li class="">
                            <a href="Arduino-Output.html">Arduino Output</a>
                        </li>
                    
                        <li class="">
                            <a href="Bandpass-Filter.html">Bandpass Filter</a>
                        </li>
                    
                        <li class="">
                            <a href="Channel-Map.html">Channel Map</a>
                        </li>
                    
                        <li class="">
                            <a href="Common-Average-Reference.html">Common Average Reference</a>
                        </li>
                    
                        <li class="">
                            <a href="Crossing-Detector.html">Crossing Detector</a>
                        </li>
                    
                        <li class="">
                            <a href="Ephys-Socket.html">Ephys Socket</a>
                        </li>
                    
                        <li class="">
                            <a href="Event-Broadcaster.html">Event Broadcaster</a>
                        </li>
                    
                        <li class="">
                            <a href="Event-Triggered-Average.html">Event Triggered Average</a>
                        </li>
                    
                        <li class="">
                            <a href="File-Reader.html">File Reader</a>
                        </li>
                    
                        <li class="">
                            <a href="Intan-Recording-Controller.html">Intan Recording Controller</a>
                        </li>
                    
                        <li class="">
                            <a href="LFP-Viewer.html">LFP Viewer</a>
                        </li>
                    
                        <li class="">
                            <a href="MATLAB-Interface.html">MATLAB Interface</a>
                        </li>
                    
                        <li class="">
                            <a href="Merger.html">Merger</a>
                        </li>
                    
                        <li class="">
                            <a href="Multiband-Integrator.html">Multi-Band Integrator</a>
                        </li>
                    
                        <li class="">
                            <a href="Network-Events.html">Network Events</a>
                        </li>
                    
                        <li class="">
                            <a href="Neuropixels-3a.html">Neuropixels 3a</a>
                        </li>
                    
                        <li class="active">
                            <a href="">Neuropixels PXI</a>
                        </li>
                    
                        <li class="">
                            <a href="NIDAQmx.html">NIDAQmx</a>
                        </li>
                    
                        <li class="">
                            <a href="Phase-Calculator.html">Phase Calculator</a>
                        </li>
                    
                        <li class="">
                            <a href="Phase-Detector.html">Phase Detector</a>
                        </li>
                    
                        <li class="">
                            <a href="Probe-Viewer.html">Probe Viewer</a>
                        </li>
                    
                        <li class="">
                            <a href="Pulse-Pal.html">Pulse Pal</a>
                        </li>
                    
                        <li class="">
                            <a href="Record-Control.html">Record Control</a>
                        </li>
                    
                        <li class="">
                            <a href="Rectifier.html">Rectifier</a>
                        </li>
                    
                        <li class="">
                            <a href="Rhythm-FPGA.html">Rhythm FPGA</a>
                        </li>
                    
                        <li class="">
                            <a href="Serial-Port.html">Serial Port</a>
                        </li>
                    
                        <li class="">
                            <a href="Spectrum-Viewer.html">Spectrum Viewer</a>
                        </li>
                    
                        <li class="">
                            <a href="Spike-Detector.html">Spike Detector</a>
                        </li>
                    
                        <li class="">
                            <a href="Spike-Sorter.html">Spike Sorter</a>
                        </li>
                    
                        <li class="">
                            <a href="Spike-Viewer.html">Spike Viewer</a>
                        </li>
                    
                        <li class="">
                            <a href="Splitter.html">Splitter</a>
                        </li>
                    
                        <li class="">
                            <a href="Stream-Muxer.html">Stream Muxer</a>
                        </li>
                    
                        <li class="">
                            <a href="ZMQ-Interface.html">ZMQ Interface</a>
                        </li>
                    
                    </ul>
                </li>
            
          
        
        
        
        
        
        
        
        
      </ul>
  
  </nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#installing-and-upgrading" class="nav-link">Installing and upgrading</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#hardware-requirements" class="nav-link">Hardware requirements</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#compatible-probes" class="nav-link">Compatible probes</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#connecting-to-the-pxi-system" class="nav-link">Connecting to the PXI system</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#calibrating-probes" class="nav-link">Calibrating probes</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#configuring-probe-settings" class="nav-link">Configuring probe settings</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#reference-selection" class="nav-link">Reference selection</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#saving-loading-and-copying-settings" class="nav-link">Saving, loading, and copying settings</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#default-loading-and-saving" class="nav-link">Default loading and saving</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#copying-settings-between-probes" class="nav-link">Copying settings between probes</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#imro-files" class="nav-link">IMRO files</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#plugin-data-streams" class="nav-link">Plugin data streams</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#synchronization" class="nav-link">Synchronization</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#built-in-self-tests" class="nav-link">Built-in self tests</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#headstage-tests" class="nav-link">Headstage tests</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#updating-basestation-firmware" class="nav-link">Updating basestation firmware</a>
        </li>
    
    </ul>
</nav>


              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="neuropixels-pxi">
<span id="neuropixelspxi"></span><h1>Neuropixels PXI<a class="headerlink" href="#neuropixels-pxi" title="Permalink to this headline">¶</a></h1>
<img alt="Annotated Neuropixels PXI editor" src="../../_images/neuropix-pxi-01.png" />
<table class="colwidths-given table" id="id1">
<caption><span class="caption-text">Streams data from a PXI-based Neuropixels data acquisition system. It can acquire data from up to 16 probes simultaneously.</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 18%" />
<col style="width: 82%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><em>Plugin Type</em></p></td>
<td><p>Source</p></td>
</tr>
<tr class="row-even"><td><p><em>Platforms</em></p></td>
<td><p>Windows only</p></td>
</tr>
<tr class="row-odd"><td><p><em>Built in?</em></p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p><em>Key Developers</em></p></td>
<td><p>Josh Siegle, Pavel Kulik</p></td>
</tr>
<tr class="row-odd"><td><p><em>Source Code</em></p></td>
<td><p><a class="reference external" href="https://github.com/open-ephys-plugins/neuropixels-pxi">https://github.com/open-ephys-plugins/neuropixels-pxi</a></p></td>
</tr>
</tbody>
</table>
<div class="section" id="installing-and-upgrading">
<h2>Installing and upgrading<a class="headerlink" href="#installing-and-upgrading" title="Permalink to this headline">¶</a></h2>
<p>The Neuropixels PXI plugin is not included by default in the Open Ephys GUI. To install, use <strong>ctrl-P</strong> to access the Plugin Installer, browse to the “Neuropix-PXI” plugin, and click the “Install” button.</p>
<p>The Plugin Installer also allows you to upgrade to the latest version. If you’re upgrading your plugin to version 0.2.0 (release on 11/23/2020), you’ll need to close and reopen the GUI following the upgrade.</p>
</div>
<div class="section" id="hardware-requirements">
<h2>Hardware requirements<a class="headerlink" href="#hardware-requirements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>One desktop computer with an <strong>Intel processor</strong> (the Enclustra driver is not compatible with AMD processors)</p></li>
<li><p>One PXI chassis (so far we’ve tested National Instruments PXIe-1071 and PXIe-1082)</p></li>
<li><p>One PXI remote control module, housed in the PXI chassis (we’ve tested National Instruments PXIe-8381 and PXIe-8398) – requires NIDAQmx driver</p></li>
<li><p>One PCIe interface card, housed in the computer (we’ve tested National Instruments PCIe-8381 and PCIe-8398)</p></li>
<li><p><em>(optional)</em> One PXI-based analog and digital I/O module (see the <a class="reference internal" href="NIDAQmx.html#nidaqmx"><span class="std std-ref">NIDAQmx</span></a> page for a list of hardware we’ve tested)</p></li>
<li><p>Cables to connect the remote control module to the PCIe card (e.g., National Instruments MXI-Express Cables, Gen 3 x8)</p></li>
<li><p>One or more Neuropixels PXIe modules (available from IMEC)</p></li>
<li><p>One or more Neuropixels cables (black + yellow twisted pair, USB-C to Omnetics, available from IMEC)</p></li>
<li><p>One or more Neuropixels headstages (available from IMEC)</p></li>
<li><p>One or more Neuropixels probes (available from IMEC)</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>In order to work properly, your PCIe card <em>must</em> be connected to an <strong>x8</strong>-compatible PCIe slot. Some motherboards only have x16 slots, which will not be able to communicate with the PXI hardware. If you are unsure whether your computer has the appropriate PCIe slots, please get in touch.</p>
</div>
</div>
<div class="section" id="compatible-probes">
<h2>Compatible probes<a class="headerlink" href="#compatible-probes" title="Permalink to this headline">¶</a></h2>
<p>This plugin can stream data from the following Neuropixels probe types:</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 29%" />
<col style="width: 24%" />
<col style="width: 47%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Probe</strong></p></td>
<td><p><strong>Channels</strong></p></td>
<td><p><strong>Notes</strong></p></td>
</tr>
<tr class="row-even"><td><p>Neuropixels 1.0</p></td>
<td><p>384 AP, 384 LFP</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Neuropixels NHP Active</p></td>
<td><p>384 AP, 384 LFP</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Neuropixels NHP Passive</p></td>
<td><p>128 AP, 128 LFP</p></td>
<td><p>May require firmware update (see below)</p></td>
</tr>
<tr class="row-odd"><td><p>Neuropixels Ultra</p></td>
<td><p>384 AP, 384 LFP</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Neuropixels 2.0 Single Shank</p></td>
<td><p>384 wideband</p></td>
<td><p>May require firmware update (see below)</p></td>
</tr>
<tr class="row-odd"><td><p>Neuropixels 2.0 Four Shank</p></td>
<td><p>384 wideband</p></td>
<td><p>May require firmware update (see below)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="connecting-to-the-pxi-system">
<h2>Connecting to the PXI system<a class="headerlink" href="#connecting-to-the-pxi-system" title="Permalink to this headline">¶</a></h2>
<p>Before using this plugin, make sure you’ve followed all of the steps in the <a class="reference external" href="https://docs.wixstatic.com/ugd/832f20_d2e8866f7a98448d90faf83d3df56140.pdf">Neuropixels User Manual</a> to set up and configure your hardware. Prior to using your Neuropixels PXI basestation, you must install the Enclustra drivers (available for <a class="reference external" href="https://github.com/open-ephys-plugins/neuropixels-pxi/raw/master/Resources/Enclustra_Win7%268.zip">Windows 7/8</a> and <a class="reference external" href="https://github.com/open-ephys-plugins/neuropixels-pxi/raw/master/Resources/Enclustra_Win10.zip">Windows 10</a>). See section 4.2.2 of the User Manual for installation instructions.</p>
<p>Once your PXI system is up and running, you can drag and drop the “Neuropix-PXI” module from the Processor List onto the Editor Viewport. The GUI will automatically connect to any available basestations in your connected PXI chassis. If no PXI basestations are found, the plugin can be run in “simulation” mode.</p>
<p>The editor will automatically create a probe selection interface for each basestation that’s available. Each basestation can communicate with up to 4 probes (for Neuropixels 1.0, NHP, and Ultra) or 8 probes (for 2.0). When the probes are initially detected, they show up as orange circles. Once they are initialized, connected probes become green. When the currently selected probe turns light green, it means that all settings have been properly loaded, and the plugin is ready to begin data acquisition. In the example at the top of this page, there are 6 probes connected, and the probe on basestation 2, port 1 is selected.</p>
<p>Besides the circles representing the four probes, each basestation column has a button to select a folder for writing data (if using the compressed NPX format), and a monitor to indicate buffer filling (from 0-100%).</p>
<p>On the right-hand side of the editor, there’s an interface for updating sync settings (more information below).</p>
</div>
<div class="section" id="calibrating-probes">
<h2>Calibrating probes<a class="headerlink" href="#calibrating-probes" title="Permalink to this headline">¶</a></h2>
<p>Probes will be calibrated automatically when the plugin is loaded, provided that calibration files are stored in one of the following locations:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">C:\ProgramData\Open</span> <span class="pre">Ephys\CalibrationInfo\&lt;probe_serial_number&gt;</span></code> (recommended)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">&lt;open-ephys-executable-folder&gt;\CalibrationInfo\&lt;probe_serial_number&gt;</span></code> (if you used the Open Ephys installer, the executable will be located in <code class="code docutils literal notranslate"><span class="pre">C:\Program</span> <span class="pre">Files\Open</span> <span class="pre">Ephys</span></code>)</p></li>
</ul>
<p>These files can be obtained from IMEC for every probe that you’ve purchased. There should be two for each probe:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">&lt;probe_serial_number&gt;_ADCCalibration.csv</span></code></p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">&lt;probe_serial_number&gt;_gainCalValues.csv</span></code></p></li>
</ul>
<p>If these files cannot be found, the following warning will pop up:</p>
<a class="reference internal image-reference" href="../../_images/calibration-files-missing-warning.png"><img alt="Calibration files missing warning" src="../../_images/calibration-files-missing-warning.png" style="width: 500px;" /></a>
</div>
<div class="section" id="configuring-probe-settings">
<h2>Configuring probe settings<a class="headerlink" href="#configuring-probe-settings" title="Permalink to this headline">¶</a></h2>
<p>To open the probe settings interface, press the “window” or “tab” button in the upper-right corner of the editor:</p>
<a class="reference internal image-reference" href="../../_images/open-settings.png"><img alt="How to open the Neuropixels settings interface" src="../../_images/open-settings.png" style="width: 450px;" /></a>
<p>Each probe has its own interface for updating settings, which will be customized for each probe type. Selecting the green button corresponding to the probe’s basestation and port in the plugin editor allows you to access the parameters for a particular probe:</p>
<img alt="Overview of the Neuropixels settings interface" src="../../_images/ui-screenshot.png" />
<p>The interface on the left allows you to select/deselect electrodes from different banks. Use the mini probe overview visualization to scroll to the electrodes you want to activate, click or drag to select them in the zoomed visualization, and then click the “ENABLE” button. Selecting electrodes on one bank will automatically deactivate the electrodes on all other banks that are connected to the same set of channels.</p>
<p>In addition, for 1.0, NHP, and Ultra probes, you can change the following settings:</p>
<ul class="simple">
<li><p><strong>AP Gain</strong> (amplifier gain for AP channels, 50x-3000x; default = 500x)</p></li>
<li><p><strong>LFP Gain</strong> (amplifier gain for LFP channels, 50x-3000x; default = 250x)</p></li>
<li><p><strong>AP Filter Cut</strong> (ON = 300 Hz high-pass filter active, OFF = filter inactive; default = ON)</p></li>
</ul>
</div>
<div class="section" id="reference-selection">
<h2>Reference selection<a class="headerlink" href="#reference-selection" title="Permalink to this headline">¶</a></h2>
<p>All probe types include a <strong>Reference</strong> drop-down menu that can be used to select one of the following reference types:</p>
<ul class="simple">
<li><p><strong>External</strong> (default) - references signals to the dedicated reference pad on the probe/flex cable. This pad can be connected to a wire immersed in saline above the brain (for acute recordings) or a screw embedded in the skull (for chronic recordings). It’s common to connect the reference pad to the ground pad, to avoid the need for additional wires.</p></li>
<li><p><strong>Tip</strong> - references signals to the large pad at the tip of the probe (or the tip of a particular shank, in the case of the 4-shank Neuropixels 2.0). The tip reference will likely reduce your overall noise levels, but it will also lead to leakage of low-frequency signals across all channels. If you want to do any analysis of the local field potential, you need to be sure to keep at least a few channels outside the brain, in order to subtract their signals offline.</p></li>
<li><p><strong>Internal</strong> (e.g. 192) - references signals to one of the electrodes on the probe shank. These channels are too high-impedance to serve as a proper reference, and are not recommended for any applications.</p></li>
</ul>
<p>In the Open Ephys GUI, reference settings are applied globally to all channels (i.e., you can’t have a different gain for a subset of channels).</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>When using multiple PXI basestations in the same chassis, some users have reported problems with the External reference. This manifests as randomly occurring saturating events on the LFP channels, combined with a sudden drop in gain on the AP channels. Such events are not seen when using the Tip reference.</p>
</div>
</div>
<div class="section" id="saving-loading-and-copying-settings">
<h2>Saving, loading, and copying settings<a class="headerlink" href="#saving-loading-and-copying-settings" title="Permalink to this headline">¶</a></h2>
<div class="section" id="default-loading-and-saving">
<h3>Default loading and saving<a class="headerlink" href="#default-loading-and-saving" title="Permalink to this headline">¶</a></h3>
<p>Any changes made to the probe settings will be automatically re-applied when you re-start the GUI, provided you have checked <strong>Reload on startup</strong> from the “File” menu. Settings will first by transferred by probe serial number. If no matching serial number is found, settings will be inherited from a probe of the same type. Settings cannot be transferred between probes of different types (e.g. Neuropixels 1.0 to Neuropixels 2.0).</p>
</div>
<div class="section" id="copying-settings-between-probes">
<h3>Copying settings between probes<a class="headerlink" href="#copying-settings-between-probes" title="Permalink to this headline">¶</a></h3>
<p>Settings can be transferred between probes using the “COPY”, “PASTE”, and “APPLY TO ALL” buttons:</p>
<a class="reference internal image-reference" href="../../_images/probe-settings-buttons.png"><img alt="Probe settings buttons" src="../../_images/probe-settings-buttons.png" style="width: 300px;" /></a>
<p>Settings can only be applied to probes of matching types (e.g. 1.0, NHP, Ultra, 2.0).</p>
</div>
<div class="section" id="imro-files">
<h3>IMRO files<a class="headerlink" href="#imro-files" title="Permalink to this headline">¶</a></h3>
<p>Settings for individual probes can also be loaded using SpikeGLX “IMec Read Out” (IMRO) tables, using the “LOAD FROM IMRO” button.</p>
<p>The IMRO format is specified <a class="reference external" href="https://billkarsh.github.io/SpikeGLX/help/imroTables/">here</a>. If you’ve saved a probe configuration using SpikeGLX or some other software, you can apply that configuration to a probe in the Open Ephys GUI by reading in an IMRO file. The only caveat is that Open Ephys does not allow individual channels to have different gain or reference settings, so those will be inherited from the last channel in the file.</p>
<p>You can save the configuration for a particular probe into IMRO format using the “SAVE TO IMRO” button.</p>
</div>
</div>
<div class="section" id="plugin-data-streams">
<h2>Plugin data streams<a class="headerlink" href="#plugin-data-streams" title="Permalink to this headline">¶</a></h2>
<p>The Neuropix-PXI plugin streams data from all connected probes through the GUI signal chain. To disable data transmission, a probe needs to be physically disconnected from the basestation. The plugin should be deleted and re-loaded any time a probe is connected or disconnected from the hardware.</p>
<p>If you’re using Neuropixels 1.0, NHP, or Ultra probes, each probe will have two data streams:</p>
<ul class="simple">
<li><p>384 channels of AP band data, sampled at 30 kHz</p></li>
<li><p>384 channels of LFP band data, sampled at 2.5 kHz.</p></li>
</ul>
<p>Each data stream is represented by a separate “subprocessor” within the GUI. Even-numbered subprocessors correspond to AP band data, while odd-numbered subprocessors correspond to LFP band data.</p>
<p>If you’re using Neuropixels 2.0 probes, each probe will have only one data stream:</p>
<ul class="simple">
<li><p>384 channels of wide-band data, sampled at 30 kHz.</p></li>
</ul>
<p>Because each probe generates 384 or 768 channels of data, this can lead to heavy CPU usage when acquiring from many probes simultaneously (as indicated by the CPU monitor, which measures the fraction time of each buffer callback spent processing data, and by the Windows Task Manager CPU meter, which measures overall CPU usage).</p>
<p>For processing Neuropixels data, the recommended signal chain is:</p>
<ol class="arabic simple">
<li><p>Neuropix-PXI</p></li>
<li><p>Record Node</p></li>
<li><p>LFP Viewer</p></li>
</ol>
<p>If you need to add plugins downstream of the LFP Viewer, it’s recommended to use a <a class="reference internal" href="Stream-Muxer.html#streammuxer"><span class="std std-ref">Stream Muxer</span></a> (stream multiplexer) plugin immediately to the right of the LFP Viewer. This will allow you to select one subprocessor at a time to send through the signal chain. All channels will still be recorded, but you’ll only be processing one probe at a time with subsequent plugins.</p>
</div>
<div class="section" id="synchronization">
<h2>Synchronization<a class="headerlink" href="#synchronization" title="Permalink to this headline">¶</a></h2>
<p>Properly configuring your synchronization signals is critical for Neuropixels recordings. Each probe will have a slightly different sample rate between 29999.9 and 30000.1 Hz, so you cannot simply count samples to figure out how much time has elapsed. Therefore, every data source (including individual basestations, NI hardware, etc.) must share a hardware sync line in order for the data to be accurately aligned offline.</p>
<p>Each Neuropixels basestation contains one SMA connector for sync input. The behavior of these connectors is configured using the synchronization interface within the plugin editor:</p>
<a class="reference internal image-reference" href="../../_images/sync-interface.png"><img alt="Updating sync settings" src="../../_images/sync-interface.png" style="width: 500px;" /></a>
<ul class="simple">
<li><p>The top drop-down menu allows you to select one basestation’s SMA connector to serve as the “master” sync. The signal on this line will be copied to the sync inputs of all other basestations.</p></li>
<li><p>The “+” button allows you to toggle whether or not the sync line is appended to the data stream as a continuous channel. When this button is orange, each subprocessor will include a 385th data channel containing the state of the sync line. This will make the Binary format data files saved by the Record Node compatible with a variety of SpikeGLX offline processing tools. Regardless of whether or not this option is enabled, the sync rising and falling edges will be transmitted as events to downstream processors.</p></li>
<li><p>The second drop-down menu allows you to configure the master sync SMA as <strong>INPUT</strong> or <strong>OUTPUT</strong>. In <strong>INPUT</strong> mode, an external digital input must be connected to the SMA. In <strong>OUTPUT</strong> mode, the master basestation will generate its own sync signal at 1 Hz or 10 Hz.</p></li>
</ul>
</div>
<div class="section" id="built-in-self-tests">
<h2>Built-in self tests<a class="headerlink" href="#built-in-self-tests" title="Permalink to this headline">¶</a></h2>
<p>If you have a probe that’s not working properly, these tests can be used to help pinpoint where the problem lies.</p>
<p>To run each test, select one from the drop-down menu, and click the “RUN” button. After the test completes, the name of the test will be updated to indicated whether it passed or failed.</p>
<table class="colwidths-given table" id="id2">
<caption><span class="caption-text">Built-in self tests</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 64%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Duration</p></th>
<th class="head"><p>Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Test probe signal</p></td>
<td><p>30 s</p></td>
<td><p>Analyzes if the probe performance falls within a specified tolerance range, based on a signal generated by the headstage</p></td>
</tr>
<tr class="row-odd"><td><p>Test probe noise</p></td>
<td><p>30 s</p></td>
<td><p>Calculates probe noise levels when electrode inputs are shorted to ground</p></td>
</tr>
<tr class="row-even"><td><p>Test PSB bus</p></td>
<td><p>&lt;1 s</p></td>
<td><p>Verifies whether signals are transmitted accurately to the headstage</p></td>
</tr>
<tr class="row-odd"><td><p>Test shift registers</p></td>
<td><p>1 s</p></td>
<td><p>Verifies the functionality of the shank and base shift registers</p></td>
</tr>
<tr class="row-even"><td><p>Test EEPROM</p></td>
<td><p>1 s</p></td>
<td><p>Tests the EEPROM memory storage on the flex, headstage, and BSC</p></td>
</tr>
<tr class="row-odd"><td><p>Test I2C</p></td>
<td><p>&lt;1 s</p></td>
<td><p>Verifies the functionality of the I2C memory map</p></td>
</tr>
<tr class="row-even"><td><p>Test Serdes</p></td>
<td><p>&lt;1 s</p></td>
<td><p>Tests the integrity of the serial communication over the probe cable</p></td>
</tr>
<tr class="row-odd"><td><p>Test Heartbeat</p></td>
<td><p>3 s</p></td>
<td><p>Tests whether the heartbeat signal between the headstage and BSC is working properly</p></td>
</tr>
<tr class="row-even"><td><p>Test Basestation</p></td>
<td><p>&lt;1 s</p></td>
<td><p>Tests the BSC board</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="headstage-tests">
<h2>Headstage tests<a class="headerlink" href="#headstage-tests" title="Permalink to this headline">¶</a></h2>
<p>If you have a headstage test module, you can run a suite of tests to ensure the headstage is functioning properly. When the Neuropix plugin is dropped into the signal chain and at least one headstage test module is connected to the PXI system, the GUI will automatically run all headstage tests and output the results in a popup window:</p>
<a class="reference internal image-reference" href="../../_images/HST.png"><img alt="Headstage test board popup window" src="../../_images/HST.png" style="width: 400px;" /></a>
</div>
<div class="section" id="updating-basestation-firmware">
<h2>Updating basestation firmware<a class="headerlink" href="#updating-basestation-firmware" title="Permalink to this headline">¶</a></h2>
<p>This plugin is compatible with any recent basestation firmware version. However, if you’re using Neuropixels 2.0 or NHP Passive probes, you’ll need to upgrade to the latest firmware (available <a class="reference external" href="https://github.com/open-ephys-plugins/neuropixels-pxi/raw/master/Resources/Neuropixels_PXI_APIv3_Firmware.zip">here</a>).</p>
<p>The currently installed firmware version will appear in the info section of the Neuropixels settings interface (upper right text block). If your basesation firmware version is “2.0137” and your basestation connect board firmware version is “3.2176”, you already have the latest firmware installed.</p>
<p>If you need to update your firmware, first click the “UPDATE FIRMWARE” button to open the firmware update interface:</p>
<a class="reference internal image-reference" href="../../_images/firmware_update_interface.png"><img alt="Interface for updating firmware" src="../../_images/firmware_update_interface.png" style="width: 460px;" /></a>
<p>Next, select a <code class="code docutils literal notranslate"><span class="pre">.bin</span></code> file for the basestation connect board (<code class="code docutils literal notranslate"><span class="pre">QBSC*.bin</span></code>), and click “UPLOAD”. The upload process can take anywhere from 10-15 minutes, so please be patient.</p>
<p>Immediately after the basestation connect board firmware upload finished, use the lower drop-down menu to select a <code class="code docutils literal notranslate"><span class="pre">.bin</span></code> file for the basestation (<code class="code docutils literal notranslate"><span class="pre">BS*.bin</span></code>), and click “UPLOAD”.</p>
<p>Finally, once the basestation firmware is finished uploading, restart your computer and power cycle the PXI chassis for the changes to take effect.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you need to update the firmware for multiple basestations in one chassis, please perform all firmware updates prior to restarting your chassis/computer. Alternatively, you can update each basestation separately if only one basestation at a time is inserted into the chassis. The Neuropixels plugin can only communicate with sets of basestations that are running the same firmware.</p>
</div>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="Neuropixels-3a.html" title="previous page">Neuropixels 3a</a>
    <a class='right-next' id="next-link" href="NIDAQmx.html" title="next page">NIDAQmx</a>

              </div>
              
          </main>
          

      </div>
    </div>

    
  <script src="../../_static/js/index.3da636dd464baa7582d2.js"></script>


    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2010-2021, Open Ephys &amp; Contributors.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.3.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>