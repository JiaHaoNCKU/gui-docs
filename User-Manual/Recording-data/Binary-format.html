
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Binary format &#8212; Open Ephys GUI Docs</title>
    
  <link rel="stylesheet" href="../../_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx_tabs/tabs.css" type="text/css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Open Ephys format" href="Open-Ephys-format.html" />
    <link rel="prev" title="Recording data" href="index.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    <a class="navbar-brand" href="../../index.html">
    
      <img src="../../_static/oe_logo_gui.svg" class="logo" alt="logo" />
    
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item active">
            <a class="nav-link" href="../index.html">User Manual</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../Developer-Guide/index.html">Developer Guide</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../Tutorials/index.html">Tutorials</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../FAQ/index.html">FAQs</a>
        </li>
        
        
      </ul>


      

      <ul class="navbar-nav">
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/open-ephys" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square"></i></span>
            </a>
          </li>
        
        
          <li class="nav-item">
            <a class="nav-link" href="https://twitter.com/openephys" target="_blank" rel="noopener">
              <span><i class="fab fa-twitter-square"></i></span>
            </a>
          </li>
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

    <div class="bd-toc-item active">
    
  
    <ul class="nav bd-sidenav">
        
        
          
            
                <li class="">
                    <a href="../Before-you-begin.html">Before you begin</a>
                </li>
            
          
            
                <li class="">
                    <a href="../Hardware-requirements.html">Hardware requirements</a>
                </li>
            
          
            
                <li class="">
                    <a href="../Installing-the-GUI.html">Installing the GUI</a>
                </li>
            
          
            
                <li class="">
                    <a href="../Exploring-the-user-interface.html">Exploring the user interface</a>
                </li>
            
          
            
                <li class="">
                    <a href="../Building-a-signal-chain.html">Building a signal chain</a>
                </li>
            
          
            
  
                <li class="active">
                    <a href="index.html">Recording data</a>
                    <ul>
                    
                        <li class="active">
                            <a href="">Binary format</a>
                        </li>
                    
                        <li class="">
                            <a href="Open-Ephys-format.html">Open Ephys format</a>
                        </li>
                    
                        <li class="">
                            <a href="NWB-format.html">NWB format</a>
                        </li>
                    
                        <li class="">
                            <a href="KWIK-format.html">KWIK format</a>
                        </li>
                    
                    </ul>
                </li>
            
          
            
                <li class="">
                    <a href="../Plugins/index.html">Plugins</a>
                </li>
            
          
        
        
        
        
        
        
        
        
      </ul>
  
  </nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#file-organization" class="nav-link">File organization</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#format-details" class="nav-link">Format details</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#continuous" class="nav-link">Continuous</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#events" class="nav-link">Events</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h4">
            <a href="#text-events" class="nav-link">Text events</a>
        </li>
    
        <li class="nav-item toc-entry toc-h4">
            <a href="#binary-events" class="nav-link">Binary events</a>
        </li>
    
        <li class="nav-item toc-entry toc-h4">
            <a href="#ttl-events" class="nav-link">TTL events</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#spikes" class="nav-link">Spikes</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#reading-data-in-python" class="nav-link">Reading data in Python</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#reading-data-in-matlab" class="nav-link">Reading data in Matlab</a>
        </li>
    
    </ul>
</nav>


              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="binary-format">
<span id="binaryformat"></span><h1>Binary format<a class="headerlink" href="#binary-format" title="Permalink to this headline">¶</a></h1>
<img alt="Binary data file icons" src="../../_images/header.png" />
<table class="colwidths-given table" id="id1">
<caption><span class="caption-text">This is the default format for the Open Ephys GUI. Continuous data is stored in flat binary files, and everything else is in JSON / numpy format. Takes advantage of widely used open standards to maximize compatibility with existing and future analysis tools.</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 18%" />
<col style="width: 82%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><em>Platforms</em></p></td>
<td><p>Windows, Linux, macOS</p></td>
</tr>
<tr class="row-even"><td><p><em>Built in?</em></p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><em>Key Developers</em></p></td>
<td><p>Aarón Cuevas López, Josh Siegle</p></td>
</tr>
<tr class="row-even"><td><p><em>Source Code</em></p></td>
<td><p><a class="reference external" href="https://github.com/open-ephys/plugin-GUI/tree/master/Source/Processors/RecordNode/BinaryFormat">https://github.com/open-ephys/plugin-GUI/tree/master/Source/Processors/RecordNode/BinaryFormat</a></p></td>
</tr>
</tbody>
</table>
<p><strong>Advantages</strong></p>
<ul class="simple">
<li><p>Continuous data is stored in a compact format of tiled 16-bit integers, which can be memory mapped for efficient loading.</p></li>
<li><p>Additional files are stored as JSON or NumPy data format, which can be read using <code class="code docutils literal notranslate"><span class="pre">numpy.load</span></code> in Python, or the <a class="reference external" href="https://github.com/kwikteam/npy-matlab">npy-matlab</a> package.</p></li>
<li><p>The format is compatible with any combination of processors or subprocessors supported by the GUI</p></li>
</ul>
<p><strong>Limitations</strong></p>
<ul class="simple">
<li><p>Requires slightly more disk space because it stores a 64-bit timestamp for every sample.</p></li>
<li><p>Continuous files are not self-contained, i.e., you need to know the number of channels and the “bit-volts” multiplier in order to read them properly.</p></li>
<li><p>It is not robust to crashes, as the NumPy file headers need to be updated when recording is stopped.</p></li>
</ul>
<div class="section" id="file-organization">
<h2>File organization<a class="headerlink" href="#file-organization" title="Permalink to this headline">¶</a></h2>
<p>Within a Record Node directory, data for each <strong>experiments</strong> (stop/start acquisition) is contained in its own sub-directory. Experiment directories are further sub-divided for individual <strong>recordings</strong> (stop/start recording).</p>
<a class="reference internal image-reference" href="../../_images/organization.png"><img alt="Binary data directory structure" src="../../_images/organization.png" style="width: 300px;" /></a>
<p>A recording directory contains sub-directories for <strong>continuous</strong>, <strong>events</strong>, and <strong>spikes</strong> data. It also contains a <code class="code docutils literal notranslate"><span class="pre">structure.oebin</span></code>, which is a JSON file detailing channel information, channel metadata, and event metadata descriptions.</p>
</div>
<div class="section" id="format-details">
<h2>Format details<a class="headerlink" href="#format-details" title="Permalink to this headline">¶</a></h2>
<div class="section" id="continuous">
<h3>Continuous<a class="headerlink" href="#continuous" title="Permalink to this headline">¶</a></h3>
<p>Continuous data is grouped by sub-processor (a block of synchronously sampled channels):</p>
<a class="reference internal image-reference" href="../../_images/continuous.png"><img alt="Binary data continuous format" src="../../_images/continuous.png" style="width: 300px;" /></a>
<p>Each <strong>continuous</strong> directory contains the following files:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">continuous.dat</span></code>: A simple binary file containing <em>N</em> channels x <em>M</em> samples 16-bit integers in little-endian format. Data is saved as <code class="code docutils literal notranslate"><span class="pre">ch1_samp1,</span> <span class="pre">ch2_samp1,</span> <span class="pre">...</span> <span class="pre">chN_samp1,</span> <span class="pre">ch1_samp2,</span> <span class="pre">ch2_samp2,</span> <span class="pre">...,</span> <span class="pre">chN_sampM</span></code>. The value of the least significant bit needed to convert the 16-bit integers to physical units is specified in the <code class="code docutils literal notranslate"><span class="pre">bitVolts</span></code> field of the relevant channel in the <code class="code docutils literal notranslate"><span class="pre">structure.oebin</span></code> JSON file. For “headstage” channels, multiplying by <code class="code docutils literal notranslate"><span class="pre">bitVolts</span></code> converts the values to microvolts, whereas for “ADC” channels, <code class="code docutils literal notranslate"><span class="pre">bitVolts</span></code> converts the values to volts.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">timestamps.npy</span></code>: A numpy array containing <em>M</em> 64-bit integers that represent the timestamps for each sample.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">synchronized_timestamps.npy</span></code>: A numpy array containing <em>M</em> 64-bit floats representing the timestamps in seconds relative to the start of the master sub-processor.</p></li>
</ul>
</div>
<div class="section" id="events">
<h3>Events<a class="headerlink" href="#events" title="Permalink to this headline">¶</a></h3>
<p>Event data is organized by processor and by “event group” (e.g., <code class="code docutils literal notranslate"><span class="pre">TTL_&lt;N&gt;</span></code>). Each event group can contain data for multiple event channels.</p>
<a class="reference internal image-reference" href="../../_images/events.png"><img alt="Binary data events format" src="../../_images/events.png" style="width: 300px;" /></a>
<p>All types of events include the following files:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">timestamps.npy</span></code> Contains <em>N</em> 64-bit timestamps for each event</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">channels.npy</span></code> Contains <em>N</em> unsigned 16-bit integers indicating the virtual channel associated to each event.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">metadata.npy</span></code> (optional) If the events contain metadata fields, they will be stored as an array of <em>N</em> lists of fields or, if there is just one field, a <em>N</em> x <code class="code docutils literal notranslate"><span class="pre">length_of_field</span></code> array of the relevant type.</p></li>
</ul>
<div class="section" id="text-events">
<h4>Text events<a class="headerlink" href="#text-events" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">text.npy</span></code>: numpy array of <em>N</em> strings</p></li>
</ul>
</div>
<div class="section" id="binary-events">
<h4>Binary events<a class="headerlink" href="#binary-events" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">data_array.npy</span></code>: numpy array of <em>N</em> x <code class="code docutils literal notranslate"><span class="pre">data_length</span></code> elements of the relevant type</p></li>
</ul>
</div>
<div class="section" id="ttl-events">
<h4>TTL events<a class="headerlink" href="#ttl-events" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">channel_states.npy</span></code>:  numpy array of <em>N</em> 16-bit integers, indicating ON (+CH_number) and OFF (-CH_number) states.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">full_words.npy</span></code>: numpy array of <em>N</em> x log2(numBits) unsigned 8-bit integers containing the binary representations of the full words received by the TTL source, in case they need to be treated as full qualified binary data.</p></li>
</ul>
</div>
</div>
<div class="section" id="spikes">
<h3>Spikes<a class="headerlink" href="#spikes" title="Permalink to this headline">¶</a></h3>
<p>Spike data is organized by processor and by “spike group” (a group of spike sources with the same number of channels). If, for example, you have stereotrodes and tetrodes within the same Spike Sorter plugin, the stereotrodes and tetrodes will appear in separate spike groups.</p>
<a class="reference internal image-reference" href="../../_images/spikes.png"><img alt="Binary data spikes format" src="../../_images/spikes.png" style="width: 300px;" /></a>
<p>Each <strong>spike group</strong> directory contains the following files:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">spike_waveforms.npy</span></code>: numpy array with dimensions <em>S</em> spikes x <em>N</em> channels x <em>M</em> samples containing the spike waveforms</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">spike_times.npy</span></code>: numpy array of <em>S</em> 64-bit integers containing the timestamps corresponding to the peak of each spike</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">spike_electrode_indices.npy</span></code>: numpy array of <em>S</em> unsigned 16-bit integers specifying which of the electrodes within the group the spike originated from</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">spike_clusters.npy</span></code>: numpy array of <em>S</em> unsigned 16-bit integers containing the sorted cluster ID for each spike (defaults to 0 if this is not available).</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">metadata.npy</span></code>: (optional) If the spikes contain metadata fields, they will be stored as an array of <em>S</em> lists of fields or, if there is just one field, a <em>S</em> x <code class="code docutils literal notranslate"><span class="pre">length_of_field</span></code> array of the relevant type.</p></li>
</ul>
<p>Detailed information about the electrodes contained in each spike group as well as the metadata fields, if any, is stored in the <code class="code docutils literal notranslate"><span class="pre">structure.oebin</span></code> JSON file.</p>
</div>
</div>
<div class="section" id="reading-data-in-python">
<h2>Reading data in Python<a class="headerlink" href="#reading-data-in-python" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><strong>(recommended)</strong> Create a <code class="code docutils literal notranslate"><span class="pre">Session</span></code> object using the <a class="reference external" href="https://github.com/open-ephys/open-ephys-python-tools">open-ephys-python-tools</a> package. The data format will be automatically detected.</p></li>
<li><p>Create a <code class="code docutils literal notranslate"><span class="pre">File</span></code> object using the <a class="reference external" href="https://github.com/CINPLA/pyopenephys">pyopenephys</a> package.</p></li>
<li><p>Use the <code class="code docutils literal notranslate"><span class="pre">DatLoad()</span></code> method from <code class="code docutils literal notranslate"><span class="pre">Binary.py</span></code> in the <a class="reference external" href="https://github.com/open-ephys/analysis-tools/blob/master/Python3/Binary.py">open-ephys/analysis-tools</a> repository.</p></li>
</ul>
</div>
<div class="section" id="reading-data-in-matlab">
<h2>Reading data in Matlab<a class="headerlink" href="#reading-data-in-matlab" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Use <code class="code docutils literal notranslate"><span class="pre">load_open_ephys_binary.m</span></code> from the <a class="reference external" href="https://github.com/open-ephys/analysis-tools/blob/master/load_open_ephys_binary.m">open-ephys/analysis-tools</a> repository.</p></li>
</ul>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="index.html" title="previous page">Recording data</a>
    <a class='right-next' id="next-link" href="Open-Ephys-format.html" title="next page">Open Ephys format</a>

              </div>
              
          </main>
          

      </div>
    </div>

    
  <script src="../../_static/js/index.3da636dd464baa7582d2.js"></script>


    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2010-2022, Open Ephys &amp; Contributors.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.3.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>