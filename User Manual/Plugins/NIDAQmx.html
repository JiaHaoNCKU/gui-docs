
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NIDAQmx &#8212; Open Ephys Documentation 0.0.0 documentation</title>
    
  <link rel="stylesheet" href="../../_static/css/index.d431a4ee1c1efae0e38bdfebc22debff.css">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../_static/_static/theme_overrides.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.30270b6e4c972e43c488.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Phase Calculator" href="Phase%20Calculator.html" />
    <link rel="prev" title="Neuropixels PXI" href="Neuropixels%20PXI.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    
    <a class="navbar-brand" href="../../index.html">
      <img src="../../_static/oe_logo_circle.svg" class="logo" alt="logo">
    </a>
    
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item active">
            <a class="nav-link" href="../index.html">User Manual</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../Developer%20Guide/index.html">Developer Guide</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../Tutorials/index.html">Tutorials</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../FAQ/index.html">FAQ</a>
        </li>
        
        
      </ul>


      

      <ul class="navbar-nav">
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/open-ephys" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square"></i></span>
            </a>
          </li>
        
        
          <li class="nav-item">
            <a class="nav-link" href="https://twitter.com/openephys" target="_blank" rel="noopener">
              <span><i class="fab fa-twitter-square"></i></span>
            </a>
          </li>
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar">

<form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>


<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

  <div class="bd-toc-item active">
  

  <ul class="nav bd-sidenav">
      
      
        
          
              <li class="">
                  <a href="../Before%20you%20begin.html">Before you begin</a>
              </li>
          
        
          
              <li class="">
                  <a href="../Installing%20the%20GUI.html">Installing the GUI</a>
              </li>
          
        
          
              <li class="">
                  <a href="../Exploring%20the%20user%20interface.html">Exploring the user interface</a>
              </li>
          
        
          
              <li class="">
                  <a href="../Building%20a%20signal%20chain.html">Building a signal chain</a>
              </li>
          
        
          
              <li class="">
                  <a href="../Recording%20data/index.html">Recording data</a>
              </li>
          
        
          

              <li class="active">
                  <a href="index.html">Plugins</a>
                  <ul>
                  
                      <li class="">
                          <a href="Arduino%20Output.html">Arduino Output</a>
                      </li>
                  
                      <li class="">
                          <a href="Bandpass%20Filter.html">Bandpass Filter</a>
                      </li>
                  
                      <li class="">
                          <a href="Channel%20Map.html">Channel Map</a>
                      </li>
                  
                      <li class="">
                          <a href="Common%20Average%20Reference.html">Common Average Reference</a>
                      </li>
                  
                      <li class="">
                          <a href="Event%20Broadcaster.html">Event Broadcaster</a>
                      </li>
                  
                      <li class="">
                          <a href="Event%20Triggered%20Average.html">Event Triggered Average</a>
                      </li>
                  
                      <li class="">
                          <a href="File%20Reader.html">File Reader</a>
                      </li>
                  
                      <li class="">
                          <a href="Intan%20Recording%20Controller.html">Intan Recording Controller</a>
                      </li>
                  
                      <li class="">
                          <a href="LFP%20Viewer.html">LFP Viewer</a>
                      </li>
                  
                      <li class="">
                          <a href="MATLAB%20Interface.html">MATLAB Interface</a>
                      </li>
                  
                      <li class="">
                          <a href="Merger.html">Merger</a>
                      </li>
                  
                      <li class="">
                          <a href="Network%20Events.html">Network Events</a>
                      </li>
                  
                      <li class="">
                          <a href="Neuropixels%203a.html">Neuropixels 3a</a>
                      </li>
                  
                      <li class="">
                          <a href="Neuropixels%20PXI.html">Neuropixels PXI</a>
                      </li>
                  
                      <li class="active">
                          <a href="">NIDAQmx</a>
                      </li>
                  
                      <li class="">
                          <a href="Phase%20Calculator.html">Phase Calculator</a>
                      </li>
                  
                      <li class="">
                          <a href="Phase%20Detector.html">Phase Detector</a>
                      </li>
                  
                      <li class="">
                          <a href="Probe%20Viewer.html">Probe Viewer</a>
                      </li>
                  
                      <li class="">
                          <a href="Pulse%20Pal.html">Pulse Pal</a>
                      </li>
                  
                      <li class="">
                          <a href="Record%20Control.html">Record Control</a>
                      </li>
                  
                      <li class="">
                          <a href="Rectifier.html">Rectifier</a>
                      </li>
                  
                      <li class="">
                          <a href="Rhythm%20FPGA.html">Rhythm FPGA</a>
                      </li>
                  
                      <li class="">
                          <a href="Serial%20Port.html">Serial Port</a>
                      </li>
                  
                      <li class="">
                          <a href="Spike%20Detector.html">Spike Detector</a>
                      </li>
                  
                      <li class="">
                          <a href="Spike%20Sorter.html">Spike Sorter</a>
                      </li>
                  
                      <li class="">
                          <a href="Spike%20Viewer.html">Spike Viewer</a>
                      </li>
                  
                      <li class="">
                          <a href="Splitter.html">Splitter</a>
                      </li>
                  
                      <li class="">
                          <a href="Stream%20Muxer.html">Stream Muxer</a>
                      </li>
                  
                      <li class="">
                          <a href="ZMQ%20Interface.html">ZMQ Interface</a>
                      </li>
                  
                  </ul>
              </li>
          
        
      
      
      
      
      
      
      
      
    </ul>

</nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#hardware-requirements" class="nav-link">Hardware requirements</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#connecting-to-the-nidaqmx-system" class="nav-link">Connecting to the NIDAQmx system</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#synchronizing-with-other-data-streams" class="nav-link">Synchronizing with other data streams</a>
        </li>
    
    </ul>
</nav>


              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="nidaqmx">
<span id="id1"></span><h1>NIDAQmx<a class="headerlink" href="#nidaqmx" title="Permalink to this headline">¶</a></h1>
<img alt="NIDAQmx plugin settings interface" src="../../_images/NIDAQmx.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<table class="colwidths-given table" id="id2">
<caption><span class="caption-text">Streams analog and digital data from National Instruments hardware. The module can acquire data from multiple PXI-based and/or USB-based National Instruments (NI) devices simultaneously. The NIDAQmx module can also be used in tandem with the Neuropix-PXI plugin, to read in analog and digital inputs in parallel with Neuropixels data.</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 18%" />
<col style="width: 82%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><em>Plugin Type</em></p></td>
<td><p>Source</p></td>
</tr>
<tr class="row-even"><td><p><em>Platforms</em></p></td>
<td><p>Windows only</p></td>
</tr>
<tr class="row-odd"><td><p><em>Built in?</em></p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p><em>Key Developers</em></p></td>
<td><p>Pavel Kulik</p></td>
</tr>
<tr class="row-odd"><td><p><em>Source Code</em></p></td>
<td><p><a class="reference external" href="https://github.com/open-ephys-plugins/nidaq-plugin">https://github.com/open-ephys-plugins/nidaq-plugin</a></p></td>
</tr>
</tbody>
</table>
<div class="section" id="hardware-requirements">
<h2>Hardware requirements<a class="headerlink" href="#hardware-requirements" title="Permalink to this headline">¶</a></h2>
<p>For PXI-based acquisition:</p>
<ul class="simple">
<li><p>One PXI chassis (so far we’ve tested National Instruments PXIe-1071 and PXIe-1082)</p></li>
<li><p>One PXI remote control module, housed in the PXI chassis (we’ve tested National Instruments PXIe-8381 and PXIe-8398) – requires NIDAQmx driver 19.0 or higher</p></li>
<li><p>One PXI-based analog and digital I/O module (we’ve tested and highly recommend National Instruments PXI-6133)</p></li>
<li><p>Cables to connect the remote control module to the PCIe card (e.g., National Instruments MXI-Express Cables, Gen 3 x8)</p></li>
<li><p>One PXI-based NI-DAQ BNC/terminal block (we’ve tested the BNC-2090A and BNC-2110)</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The NIDAQmx plugin is currently only able to sync analog and digital input signals from NI cards that support correlated (hardware-timed) digital I/O. It is not trivial to discern this capability from the NI data sheets, so please double-check that your particular card supports this feature prior to purchasing a card. Again, we highly recommend the PXI-6133 card. This module also does not yet support NI cards that only have digital inputs (ex: NI 6521).</p>
</div>
<p>For USB-based acquisition:</p>
<ul class="simple">
<li><p>One NI USB device (we’ve tested the USB-6001)</p></li>
<li><p>One micro-USB (or related) cable to connect the USB device to the computer.</p></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>These devices are known to experience ‘signal ghosting’ if unused analog input channels are not grounded. Grounding at least one positive terminal of an unused analog input channel can reduce ghosting by ~99% of the highest amplitude active channel.</p>
</div>
</div>
<div class="section" id="connecting-to-the-nidaqmx-system">
<h2>Connecting to the NIDAQmx system<a class="headerlink" href="#connecting-to-the-nidaqmx-system" title="Permalink to this headline">¶</a></h2>
<p>Once your PXI system is up and running, you can drag and drop the NIDAQmx module from the Processor List onto the Editor Viewport. The module automatically checks for all connected NI devices and by default loads the first device found. The device product name appears directly to the right of ‘NIDAQmx’ in the title.</p>
<p>If multiple NI devices are found, a ‘Device Swap’ button will appear in the top right corner that acts as a toggle switch to cycle through all available devices. The module only looks for devices when the plugin is dropped into the EditorViewport. If a new device is connected after the plugin is dropped, you will need to drop a new NIDAQmx module to be able to connect to the new device.</p>
<p>The editor will automatically generate control buttons for each analog and digital input available on the currently selected NI device. Each analog channel contains a channel status toggle button as well as a terminal configuration toggle button. The channel status toggle button is set to on (green) by default for all channels and is intended to enable/disable channels on the fly. Toggling an enabled channel to off (gray) will ‘zero-out’ the data coming in on that channel.</p>
<p>Each analog channel also contains a terminal configuration toggle specific to the device connected. Possible terminal device configurations are RSE (Referenced Single-Ended), NRSE (Non-Referenced Single-Ended), DIFF (Differential) and PDIF (Pseudo-Differential). The terminal configuration toggle setting in the module should match the configuration in your experimental setup. Since most NI devices cannot infer the terminal configuration electronically, it is on the user to ensure the module configuration matches the experimental setup prior to acquiring and recording data. An inconsistent terminal configuration can affect the amplitude and voltage offset of the incoming data.</p>
<p>Each digital channel contains a channel status toggle button as well. Disabling digital channels is particularly useful when a digital input line is constantly high or a digital line is not used at all.</p>
<p>On the right side of the module are pull-down selection menus to select the sample rate and voltage range of all analog input channels (set individually for each channel). The module defaults to the highest sample rate as well as the largest voltage range available on the devices. Sample rate and voltage range selection are both disabled during data acquisition and recording.</p>
</div>
<div class="section" id="synchronizing-with-other-data-streams">
<h2>Synchronizing with other data streams<a class="headerlink" href="#synchronizing-with-other-data-streams" title="Permalink to this headline">¶</a></h2>
<p>The NIDAQmx module has its own sample clock, even if it’s in the same PXI chassis as other hardware (e.g. a Neuropixels basestation). Therefore, it needs to be treated as a separate device when performing offline synchronization.</p>
<p>To align timestamps across devices, one device has to be treated as the “master” clock, and all other sets of timestamps must be scaled and shifted to match this clock. This requires that a digital sync line is shared across all devices. For now, you’ll need to manually connect a sync line to one of the digital input lines on all of your devices. If you don’t already have a solution for this, we recommend using an Arduino running the sync-barcodes program, which generates unique temporal barcode patterns every 30 s. This will allow you to align sample clocks accurately, even if your devices are stopped and started at different times.</p>
<p>To perform the alignment, you’ll need to identify the first and last shared sync pulse in the recording. The temporal offset between the start of the first sync pulses defines the shift between any device and the master clock. Once you know this, you can calculate the expected interval between the firs and last sync pulse (given the expected sample rate of a device). The ratio of the actual interval to the expected interval defines the scaling factor for that device.</p>
<p>Then, each non-master clock can be transformed by the following equation (in Matlab):</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">aligned_timestamps</span> <span class="p">=</span> <span class="n">scaling</span> <span class="o">.*</span> <span class="n">original_timestamps</span> <span class="o">+</span> <span class="n">shift</span><span class="p">;</span>
</pre></div>
</div>
<p>The “aligned_timestamps” will now be aligned to the master clock, and are ready for analysis.</p>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="Neuropixels%20PXI.html" title="previous page">Neuropixels PXI</a>
    <a class='right-next' id="next-link" href="Phase%20Calculator.html" title="next page">Phase Calculator</a>

              </div>
              
          </main>
          

      </div>
    </div>

    
  <script src="../../_static/js/index.30270b6e4c972e43c488.js"></script>


    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2010-2020, Open Ephys &amp; Contributors.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.2.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>