

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neuropixels PXI &#8212; Open Ephys Documentation 0.0.0 documentation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../../_static/_static/theme_overrides.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="NIDAQmx" href="NIDAQmx.html" />
    <link rel="prev" title="Neuropixels 3a" href="Neuropixels 3a.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    
    <a class="navbar-brand" href="../../index.html">
      <img src="../../_static/oe_logo_circle.svg" class="logo" alt="logo">
    </a>
    
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item active">
            <a class="nav-link" href="../index.html">User Manual</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../Developer Guide/index.html">Developer Guide</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../Tutorials/index.html">Tutorials</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../FAQ/index.html">FAQ</a>
        </li>
        
        
      </ul>


      

      <ul class="navbar-nav">
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/open-ephys" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square"></i></span>
            </a>
          </li>
        
        
          <li class="nav-item">
            <a class="nav-link" href="https://twitter.com/openephys" target="_blank" rel="noopener">
              <span><i class="fab fa-twitter-square"></i></span>
            </a>
          </li>
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar">

<form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>


<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

  <div class="bd-toc-item active">
  

  <ul class="nav bd-sidenav">
      
      
        
          
              <li class="">
                  <a href="../Before you begin.html">Before you begin</a>
              </li>
          
        
          
              <li class="">
                  <a href="../Installing the GUI.html">Installing the GUI</a>
              </li>
          
        
          
              <li class="">
                  <a href="../Exploring the user interface.html">Exploring the user interface</a>
              </li>
          
        
          
              <li class="">
                  <a href="../Building a signal chain.html">Building a signal chain</a>
              </li>
          
        
          
              <li class="">
                  <a href="../Recording data/index.html">Recording data</a>
              </li>
          
        
          

              <li class="active">
                  <a href="index.html">Plugins</a>
                  <ul>
                  
                      <li class="">
                          <a href="Arduino Output.html">Arduino Output</a>
                      </li>
                  
                      <li class="">
                          <a href="Bandpass Filter.html">Bandpass Filter</a>
                      </li>
                  
                      <li class="">
                          <a href="Channel Map.html">Channel Map</a>
                      </li>
                  
                      <li class="">
                          <a href="Common Average Reference.html">Common Average Reference</a>
                      </li>
                  
                      <li class="">
                          <a href="Event Broadcaster.html">Event Broadcaster</a>
                      </li>
                  
                      <li class="">
                          <a href="Event Triggered Average.html">Event Triggered Average</a>
                      </li>
                  
                      <li class="">
                          <a href="File Reader.html">File Reader</a>
                      </li>
                  
                      <li class="">
                          <a href="Intan Recording Controller.html">Intan Recording Controller</a>
                      </li>
                  
                      <li class="">
                          <a href="LFP Viewer.html">LFP Viewer</a>
                      </li>
                  
                      <li class="">
                          <a href="MATLAB Interface.html">MATLAB Interface</a>
                      </li>
                  
                      <li class="">
                          <a href="Merger.html">Merger</a>
                      </li>
                  
                      <li class="">
                          <a href="Network Events.html">Network Events</a>
                      </li>
                  
                      <li class="">
                          <a href="Neuropixels 3a.html">Neuropixels 3a</a>
                      </li>
                  
                      <li class="active">
                          <a href="">Neuropixels PXI</a>
                      </li>
                  
                      <li class="">
                          <a href="NIDAQmx.html">NIDAQmx</a>
                      </li>
                  
                      <li class="">
                          <a href="Phase Calculator.html">Phase Calculator</a>
                      </li>
                  
                      <li class="">
                          <a href="Phase Detector.html">Phase Detector</a>
                      </li>
                  
                      <li class="">
                          <a href="Probe Viewer.html">Probe Viewer</a>
                      </li>
                  
                      <li class="">
                          <a href="Pulse Pal.html">Pulse Pal</a>
                      </li>
                  
                      <li class="">
                          <a href="Record Control.html">Record Control</a>
                      </li>
                  
                      <li class="">
                          <a href="Rectifier.html">Rectifier</a>
                      </li>
                  
                      <li class="">
                          <a href="Rhythm FPGA.html">Rhythm FPGA</a>
                      </li>
                  
                      <li class="">
                          <a href="Serial Port.html">Serial Port</a>
                      </li>
                  
                      <li class="">
                          <a href="Spike Detector.html">Spike Detector</a>
                      </li>
                  
                      <li class="">
                          <a href="Spike Sorter.html">Spike Sorter</a>
                      </li>
                  
                      <li class="">
                          <a href="Spike Viewer.html">Spike Viewer</a>
                      </li>
                  
                      <li class="">
                          <a href="Splitter.html">Splitter</a>
                      </li>
                  
                      <li class="">
                          <a href="Stream Muxer.html">Stream Muxer</a>
                      </li>
                  
                      <li class="">
                          <a href="ZMQ Interface.html">ZMQ Interface</a>
                      </li>
                  
                  </ul>
              </li>
          
        
      
      
      
      
      
      
      
      
    </ul>

</nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#hardware-requirements" class="nav-link">Hardware requirements</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#connecting-to-the-pxi-system" class="nav-link">Connecting to the PXI system</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#configuring-probes" class="nav-link">Configuring probes</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#calibrating-probes" class="nav-link">Calibrating probes</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#selecting-individual-data-streams" class="nav-link">Selecting individual data streams</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#built-in-self-tests" class="nav-link">Built-in self tests</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#headstage-tests" class="nav-link">Headstage tests</a>
        </li>
    
    </ul>
</nav>


              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="neuropixels-pxi">
<span id="neuropixelspxi"></span><h1>Neuropixels PXI<a class="headerlink" href="#neuropixels-pxi" title="Permalink to this headline">¶</a></h1>
<img alt="Annotated Neuropixels PXI editor" src="../../_images/neuropix-pxi-01.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<table class="colwidths-given table" id="id1">
<caption><span class="caption-text">Streams data from a PXI-based data acquisition system for Neuropixels 1.0 probes. It can acquire data from up to 16 probes simultaneously.</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 18%" />
<col style="width: 82%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><em>Plugin Type</em></p></td>
<td><p>Source</p></td>
</tr>
<tr class="row-even"><td><p><em>Platforms</em></p></td>
<td><p>Windows only</p></td>
</tr>
<tr class="row-odd"><td><p><em>Built in?</em></p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p><em>Key Developers</em></p></td>
<td><p>Josh Siegle, Pavel Kulik</p></td>
</tr>
<tr class="row-odd"><td><p><em>Source Code</em></p></td>
<td><p><a class="reference external" href="https://github.com/open-ephys-plugins/neuropixels-pxi">https://github.com/open-ephys-plugins/neuropixels-pxi</a></p></td>
</tr>
</tbody>
</table>
<div class="section" id="hardware-requirements">
<h2>Hardware requirements<a class="headerlink" href="#hardware-requirements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>One PXI chassis (so far we’ve tested National Instruments PXIe-1071 and PXIe-1082)</p></li>
<li><p>One PXI remote control module, housed in the PXI chassis (we’ve tested National Instruments PXIe-8381 and PXIe-8398) – requires NIDAQmx driver</p></li>
<li><p>One PCIe interface card, housed in the computer (we’ve tested National Instruments PCIe-8381 and PCIe-8398)</p></li>
<li><p><em>(optional)</em> One PXI-based analog and digital I/O module (we’ve tested National Instruments PXI-6133)</p></li>
<li><p>Cables to connect the remote control module to the PCIe card (e.g., National Instruments MXI-Express Cables, Gen 3 x8)</p></li>
<li><p>1 or 2 Neuropixels PXIe modules (available from IMEC) – requires Enclustra driver, available when downloading the GUI</p></li>
<li><p>1 to 8 Neuropixels 1.0 cables (black + yellow twisted pair, USB-C to Omnetics, available from IMEC)</p></li>
<li><p>1 to 8 Neuropixels 1.0 headstages (available from IMEC)</p></li>
<li><p>1 to 8 Neuropixels 1.0 probes (available from IMEC)</p></li>
</ul>
<p>If you’ve tested the GUI with PXI hardware from a manufacturer other than National Instruments, please let us know. Other possible hardware configurations can be found on the <a class="reference external" href="https://github.com/billkarsh/SpikeGLX/blob/master/Markdown/SystemRequirements_PXI.md">SpikeGLX GitHub</a> – we plan on testing these with Open Ephys as soon as possible.</p>
</div>
<div class="section" id="connecting-to-the-pxi-system">
<h2>Connecting to the PXI system<a class="headerlink" href="#connecting-to-the-pxi-system" title="Permalink to this headline">¶</a></h2>
<p>Before using this module, make sure you’ve followed all of the steps in the <a class="reference external" href="https://docs.wixstatic.com/ugd/832f20_d2e8866f7a98448d90faf83d3df56140.pdf">Neuropixels User Manual</a> to set up and configure your hardware.</p>
<p>Once your PXI system is up and running, you can drag and drop the “Neuropix-PXI” module from the Processor List onto the Editor Viewport. The GUI will freeze while it searches for available probes. After that, the module will be grayed out while the probes are initialized and calibrated.</p>
<p>The editor will automatically create a probe selection interface for each basestation that’s available. Each basestation can communicate with up to 4 probes, indicated by circles. When the probes are initially detected, they show up as orange. Unconnected probes appear gray. Once they are initialized, connected probes become filled in with green. When the currently selected probe turns light green, it means that all settings have been properly loaded, and the plugin is ready to begin data acquisition. In this example, there are 6 probes connected, and the probe on basestation 2, port 1 is selected.</p>
<p>Besides the circles representing the four probes, each basestation column has a button to select a folder for writing data (if using the compressed NPX format), and a monitor to indicate buffer filling (from 0-100%).</p>
<p>On the right-hand side of the editor, there’s an interface for updating sync settings (more information below).</p>
</div>
<div class="section" id="configuring-probes">
<h2>Configuring probes<a class="headerlink" href="#configuring-probes" title="Permalink to this headline">¶</a></h2>
<p>To open the probe settings interface, press the “window” or “tab” button in the upper-right corner of the editor.</p>
<img alt="Overview of the Neuropixels settings interface" src="../../_images/neuropix-settings-interface.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Each probe has its own interface for updating settings. Selecting one of the buttons in the module’s editor allows you to access the parameters for a particular probe.</p>
<p>The available settings are:</p>
<ul class="simple">
<li><p><strong>AP Gain</strong> (amplifier gain for AP channels, 50x-3000x, default = 500x)</p></li>
<li><p><strong>LFP Gain</strong> (amplifier gain for LFP channels, 50x-3000x, default = 250x)</p></li>
<li><p><strong>Reference</strong> (External, Tip, plus channels 192, 576, or 959, default = External)</p></li>
<li><p><strong>AP Filter Cut</strong> (ON = 300 Hz high-pass filter active, OFF = filter inactive)</p></li>
<li><p>You can also select/deselect electrodes from different banks. By default, the bottom 384 eleectrodes are selected. To select electrodes farther up the probe, use the interface on the left to scroll to the electrodes you want to activate and click the “ENABLE” button. Selecting electrodes on one bank will deactivate the associated electrodes on the other two banks.</p></li>
</ul>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Saved configurations associate settings with particular probe serial numbers, rather than PXI ports. If you’ve changed the order in which probes are connected to the PXI basestation, please be aware that the settings will be loaded based on probe serial number.</p>
</div>
</div>
<div class="section" id="calibrating-probes">
<h2>Calibrating probes<a class="headerlink" href="#calibrating-probes" title="Permalink to this headline">¶</a></h2>
<p>Probes will be calibrated automatically when the plugin is loaded, provided that calibration files are stored in the correct location:</p>
<p><code class="code docutils literal notranslate"><span class="pre">&lt;open-ephys-executable-folder&gt;\CalibrationInfo\&lt;probe_serial_number&gt;</span></code></p>
<p>These files can be obtained from IMEC for every probe that you’ve purchased. There should be two for each probe:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">&lt;probe_serial_number&gt;_ADCCalibration.csv</span></code></p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">&lt;probe_serial_number&gt;_gainCalValues.csv</span></code></p></li>
</ul>
<p>If these files cannot be found, the following warning will pop up:</p>
<a class="reference internal image-reference" href="../../_images/calibration-files-missing-warning.png"><img alt="Calibration files missing warning" src="../../_images/calibration-files-missing-warning.png" style="width: 500px;" /></a>
</div>
<div class="section" id="selecting-individual-data-streams">
<h2>Selecting individual data streams<a class="headerlink" href="#selecting-individual-data-streams" title="Permalink to this headline">¶</a></h2>
<p>By default, the Neuropix plugin will send data from all probes through the GUI signal chain. Because each probe generates 384 channels of AP-band and 384 channels of LFP-band data, the number of channels being pushed through the signal chain is 768 x <em>N</em>, where <em>N</em> is the number of connected probes. This adds up quickly, and can lead to heavy CPU usage when recording from many probes simultaneously (as indicated by the CPU monitor, which measures the fraction time of each buffer callback spent processing data, and by the Windows Task Manager CPU meter, which measures overall CPU usage).</p>
<p>To save CPU cycles during acquisition, it’s recommended to use a <a class="reference internal" href="Stream Muxer.html#streammuxer"><span class="std std-ref">Stream Muxer</span></a> (stream multiplexer) plugin immediately to the right of the Record Node that’s saving data from the Neuropixels plugin. This will allow you to select one probe to send through the signal chain. All channels will still be recorded, but you’ll only be filtering, referencing, visualizing, etc. one probe at a time.</p>
</div>
<div class="section" id="built-in-self-tests">
<h2>Built-in self tests<a class="headerlink" href="#built-in-self-tests" title="Permalink to this headline">¶</a></h2>
<p>If you have a probe that’s not working properly, these tests can be used to help pinpoint where the problem lies.</p>
<p>To run each test, select one from the drop-down menu, and click the “RUN” button. After the test completes, the name of the test will be updated to indicated whether it passed or failed.</p>
<table class="colwidths-given table" id="id2">
<caption><span class="caption-text">Built-in self tests</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 64%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Duration</p></th>
<th class="head"><p>Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Test probe signal</p></td>
<td><p>30 s</p></td>
<td><p>Analyzes if the probe performance falls within a specified tolerance range, based on a signal generated by the headstage</p></td>
</tr>
<tr class="row-odd"><td><p>Test probe noise</p></td>
<td><p>30 s</p></td>
<td><p>Calculates probe noise levels when electrode inputs are shorted to ground</p></td>
</tr>
<tr class="row-even"><td><p>Test PSB bus</p></td>
<td><p>&lt;1 s</p></td>
<td><p>Verifies whether signals are transmitted accurately to the headstage</p></td>
</tr>
<tr class="row-odd"><td><p>Test shift registers</p></td>
<td><p>1 s</p></td>
<td><p>Verifies the functionality of the shank and base shift registers</p></td>
</tr>
<tr class="row-even"><td><p>Test EEPROM</p></td>
<td><p>1 s</p></td>
<td><p>Tests the EEPROM memory storage on the flex, headstage, and BSC</p></td>
</tr>
<tr class="row-odd"><td><p>Test I2C</p></td>
<td><p>&lt;1 s</p></td>
<td><p>Verifies the functionality of the I2C memory map</p></td>
</tr>
<tr class="row-even"><td><p>Test Serdes</p></td>
<td><p>&lt;1 s</p></td>
<td><p>Tests the integrity of the serial communication over the probe cable</p></td>
</tr>
<tr class="row-odd"><td><p>Test Heartbeat</p></td>
<td><p>3 s</p></td>
<td><p>Tests whether the heartbeat signal between the headstage and BSC is working properly</p></td>
</tr>
<tr class="row-even"><td><p>Test Basestation</p></td>
<td><p>&lt;1 s</p></td>
<td><p>Tests the BSC board</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="headstage-tests">
<h2>Headstage tests<a class="headerlink" href="#headstage-tests" title="Permalink to this headline">¶</a></h2>
<p>If you have a headstage test module, you can run a suite of tests to ensure the headstage is functioning properly. When the Neuropix plugin is dropped into the signal chain and at least one headstage test module is connected to the PXI system, the GUI will automatically run all headstage tests and output the results in a popup window:</p>
<img alt="Headstage test board popup window" src="../../_images/HST.png" />
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="Neuropixels 3a.html" title="previous page">Neuropixels 3a</a>
    <a class='right-next' id="next-link" href="NIDAQmx.html" title="next page">NIDAQmx</a>

              </div>
              
          </main>
          

      </div>
    </div>

    <script src="../../_static/js/index.js"></script>
    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2010-2020, Open Ephys &amp; Contributors.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.1.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>