
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Creating a new plugin &#8212; Open Ephys Documentation 0.0.0 documentation</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx_tabs/tabs.css" type="text/css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Adding a new data format" href="Adding-a-new-data-format.html" />
    <link rel="prev" title="Compiling plugins" href="Compiling-plugins.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../index.html">
  <img src="../_static/oe_logo_circle.svg" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../User-Manual/index.html">
  User Manual
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index.html">
  Developer Guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../Tutorials/index.html">
  Tutorials
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../FAQ/index.html">
  FAQ
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/open-ephys" rel="noopener" target="_blank" title="GitHub">
            <span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/openephys" rel="noopener" target="_blank" title="Twitter">
            <span><i class="fab fa-twitter-square"></i></span>
            <label class="sr-only">Twitter</label>
          </a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Compiling-the-GUI.html">
   Compiling the GUI
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Compiling-plugins.html">
   Compiling plugins
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Creating a new plugin
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Adding-a-new-data-format.html">
   Adding a new data format
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Open-Ephys-Plugin-API.html">
   Open Ephys Plugin API
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Distributing-plugins.html">
   Distributing plugins
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Modifying-the-host-application.html">
   Modifying the host application
  </a>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#creating-a-new-plugin-repository">
   Creating a new plugin repository
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#editing-openephyslib-cpp">
   Editing
   <code class="code docutils literal notranslate">
    <span class="pre">
     OpenEphysLib.cpp
    </span>
   </code>
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#processor-plugins">
     <strong>
      Processor
     </strong>
     Plugins
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#datathread-plugins">
     <strong>
      DataThread
     </strong>
     Plugins
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#recordengine-and-filesource-plugins">
     <strong>
      RecordEngine
     </strong>
     and
     <strong>
      FileSource
     </strong>
     Plugins
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#adding-source-code">
   Adding source code
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#including-external-libraries">
   Including external libraries
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#compiling-your-plugin">
   Compiling your plugin
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="creating-a-new-plugin">
<span id="creatinganewplugin"></span><h1>Creating a new plugin<a class="headerlink" href="#creating-a-new-plugin" title="Permalink to this headline">¶</a></h1>
<p>Plugins are the primary means of extending the GUI’s functionality. You can create “source” plugins that interface with new types of data acquisition hardware, “filter” plugins that modify incoming data, or “sink” plugins that send data to other applications or output devices. “Record engines” are also plugins that define new formats for reading an writing data.</p>
<p>Some plugins still live inside the main <a class="reference external" href="https://github.com/open-ephys/plugin-GUI">plugin-GUI</a> repository, but we recommend that all new plugins be hosted separately.</p>
<p>Some examples of externally hosted plugins include:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/open-ephys-plugins/neuropixels-pxi">Neuropixels PXI</a> (DataThread Source)</p></li>
<li><p><a class="reference external" href="https://github.com/open-ephys-plugins/StreamMuxer">Stream Muxer</a> (Filter Processor)</p></li>
<li><p><a class="reference external" href="https://github.com/open-ephys-plugins/probe-viewer">Probe Viewer</a> (Sink Processor)</p></li>
<li><p><a class="reference external" href="https://github.com/open-ephys-plugins/NWBFormat">NWB Format</a> (RecordEngine)</p></li>
</ul>
<p>This page will show you how to create new plugins and compile them for Linux, Mac, and Windows. These instructions assume you have already compiled the main application. If not, follow the instructions on <a class="reference internal" href="Compiling-the-GUI.html#compilingthegui"><span class="std std-ref">this page</span></a>.</p>
<div class="section" id="creating-a-new-plugin-repository">
<h2>Creating a new plugin repository<a class="headerlink" href="#creating-a-new-plugin-repository" title="Permalink to this headline">¶</a></h2>
<p>The first step in creating a new plugin is to create a repository from the <a class="reference external" href="https://github.com/open-ephys-plugins/OEPlugin">OEPlugin</a> template.</p>
<ol class="arabic simple">
<li><p>Log in to your <a class="reference external" href="https://github.com/">GitHub</a> account.</p></li>
<li><p>Browse to the <a class="reference external" href="https://github.com/open-ephys-plugins/OEPlugin">OEPlugin</a> template repository.</p></li>
<li><p>Click the green “Use this template” button.</p></li>
<li><p>Choose a name for your plugin. It should succinctly capture the plugin’s functionality (and doesn’t need to include the word “plugin”).</p></li>
<li><p>Click the green “Create repository from template” button.</p></li>
</ol>
<p>On your local machine, create an “OEPlugins” directory within the same directory that contains your <code class="code docutils literal notranslate"><span class="pre">plugin-GUI</span></code> repository: Then, using the command line or the <a class="reference external" href="https://desktop.github.com/">GitHub Desktop</a> app, clone your the plugin repository into this new folder. Your directory structure should look something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">code_directory</span><span class="o">/</span>
   <span class="n">plugin</span><span class="o">-</span><span class="n">GUI</span><span class="o">/</span>
   <span class="n">OEPlugins</span><span class="o">/</span>
      <span class="n">NewPlugin</span><span class="o">/</span>
         <span class="n">Source</span><span class="o">/</span>
         <span class="n">Build</span><span class="o">/</span>
         <span class="n">CMakeLists</span><span class="o">.</span><span class="n">txt</span>
         <span class="n">CMAKE_README</span><span class="o">.</span><span class="n">txt</span>
         <span class="n">README</span><span class="o">.</span><span class="n">md</span>
</pre></div>
</div>
</div>
<div class="section" id="editing-openephyslib-cpp">
<h2>Editing <code class="code docutils literal notranslate"><span class="pre">OpenEphysLib.cpp</span></code><a class="headerlink" href="#editing-openephyslib-cpp" title="Permalink to this headline">¶</a></h2>
<p>Inside the “Source” folder of the plugin repository you just cloned, you’ll find the <code class="code docutils literal notranslate"><span class="pre">OpenEphysLib.cpp</span></code> file that contains critical information about your plugin. Open it in your preferred text editor and make the following changes, depending on the type of plugin you’re creating:</p>
<div class="section" id="processor-plugins">
<h3><strong>Processor</strong> Plugins<a class="headerlink" href="#processor-plugins" title="Permalink to this headline">¶</a></h3>
<p>Most plugins will be “processors,” meaning they implement the <code class="code docutils literal notranslate"><span class="pre">process()</span></code> method of <a class="reference external" href="https://github.com/open-ephys/plugin-GUI/blob/master/Source/Processors/GenericProcessor/GenericProcessor.h">GenericProcessor.h</a>. This method is called repeatedly during the GUI’s acquisition loop, so each plugin has a chance to respond to incoming data (or generate its own). Processor plugins should uncomment and edit the following lines in <code class="code docutils literal notranslate"><span class="pre">OpenEphysLib.cpp</span></code>:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// specifies that we are creating a Processor plugin</span>
<span class="n">info</span><span class="o">-&gt;</span><span class="n">type</span> <span class="o">=</span> <span class="n">PluginType</span><span class="o">::</span><span class="n">PLUGIN_TYPE_PROCESSOR</span><span class="p">;</span>

<span class="c1">// edit to change how your plugin&#39;s name is displayed in the GUI</span>
<span class="n">info</span><span class="o">-&gt;</span><span class="n">processor</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;Plugin Name&quot;</span><span class="p">;</span>

<span class="c1">// Select one of the following: FilterProcessor, SourceProcessor, SinkProcessor or UtilityProcessor</span>
<span class="n">info</span><span class="o">-&gt;</span><span class="n">processor</span><span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">ProcessorType</span><span class="o">::</span><span class="n">FilterProcessor</span><span class="p">;</span>

<span class="c1">// Replace &quot;ProcessorPluginSpace::ProcessorPlugin&quot; with the namespace and class name of your plugin</span>
<span class="n">info</span><span class="o">-&gt;</span><span class="n">processor</span><span class="p">.</span><span class="n">creator</span> <span class="o">=</span> <span class="o">&amp;</span><span class="p">(</span><span class="n">Plugin</span><span class="o">::</span><span class="n">createProcessor</span><span class="o">&lt;</span><span class="n">ProcessorPluginSpace</span><span class="o">::</span><span class="n">ProcessorPlugin</span><span class="o">&gt;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="datathread-plugins">
<h3><strong>DataThread</strong> Plugins<a class="headerlink" href="#datathread-plugins" title="Permalink to this headline">¶</a></h3>
<p>Source plugins that acquire data in a separate thread (e.g., because the acquisition hardware is not sychronized with the computer’s clock) should be implemented as a DataThread plugin. Instead of calling the <code class="code docutils literal notranslate"><span class="pre">process()</span></code> method directly, DataThread plugins add data to a buffer as it becomes available, which will be automatically copied into the GUI’s signal chain. DataThread plugins should uncomment and edit the following lines in <code class="code docutils literal notranslate"><span class="pre">OpenEphysLib.cpp</span></code>:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// specifies that we are creating a DataThread plugin</span>
<span class="n">info</span><span class="o">-&gt;</span><span class="n">type</span> <span class="o">=</span> <span class="n">PluginType</span><span class="o">::</span><span class="n">PLUGIN_TYPE_DATA_THREAD</span><span class="p">;</span>

<span class="c1">// edit to change how your plugin&#39;s name is displayed in the GUI</span>
<span class="n">info</span><span class="o">-&gt;</span><span class="n">dataThread</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;Plugin Name&quot;</span><span class="p">;</span>

<span class="c1">// Replace &quot;DataThreadClassName&quot; with the class name of your plugin</span>
<span class="n">info</span><span class="o">-&gt;</span><span class="n">dataThread</span><span class="p">.</span><span class="n">creator</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">createDataThread</span><span class="o">&lt;</span><span class="n">DataThreadClassName</span><span class="o">&gt;</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="recordengine-and-filesource-plugins">
<h3><strong>RecordEngine</strong> and <strong>FileSource</strong> Plugins<a class="headerlink" href="#recordengine-and-filesource-plugins" title="Permalink to this headline">¶</a></h3>
<p>See <a class="reference internal" href="Adding-a-new-data-format.html#addinganewdataformat"><span class="std std-ref">Adding a new data format</span></a>.</p>
</div>
</div>
<div class="section" id="adding-source-code">
<h2>Adding source code<a class="headerlink" href="#adding-source-code" title="Permalink to this headline">¶</a></h2>
<p>Add the plugin’s source files to the “Source” directory, or use the included files as a starting point.</p>
<p>If you’re using the template files, choose the header and cpp files corresponding to the type of plugin you’re creating (Processor or DataThread), and delete the rest. You’ll have to find and replace the default class name with the name of your plugin’s class.</p>
<p>By default, CMake will add any files with <strong>.h</strong> or <strong>.cpp</strong> extensions that live in the “Source” directory. If you have files with alternate extensions, you’ll have to edit the following line of <strong>CMakeLists.txt</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">file</span><span class="p">(</span><span class="n">GLOB_RECURSE</span> <span class="n">SRC_FILES</span> <span class="n">LIST_DIRECTORIES</span> <span class="n">false</span> <span class="s2">&quot;$</span><span class="si">{SOURCE_PATH}</span><span class="s2">/*.cpp&quot;</span> <span class="s2">&quot;$</span><span class="si">{SOURCE_PATH}</span><span class="s2">/*.h&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="including-external-libraries">
<h2>Including external libraries<a class="headerlink" href="#including-external-libraries" title="Permalink to this headline">¶</a></h2>
<p>If your plugin depends on external libraries, it is necessary to manually edit the <strong>CMakeLists.txt</strong> file. The relevant lines are commented out at the end of this file.</p>
</div>
<div class="section" id="compiling-your-plugin">
<h2>Compiling your plugin<a class="headerlink" href="#compiling-your-plugin" title="Permalink to this headline">¶</a></h2>
<p>Follow the instructions on <a class="reference internal" href="Compiling-plugins.html#compilingplugins"><span class="std std-ref">Compiling plugins</span></a> to build your new plugin.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="Compiling-plugins.html" title="previous page">Compiling plugins</a>
    <a class='right-next' id="next-link" href="Adding-a-new-data-format.html" title="next page">Adding a new data format</a>

              </div>
              
          </main>
          

      </div>
    </div>
  
  <script src="../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2010-2021, Open Ephys &amp; Contributors.<br/>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.0.2.<br/>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>