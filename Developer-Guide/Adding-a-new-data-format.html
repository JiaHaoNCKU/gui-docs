
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Adding a new data format &#8212; Open Ephys Documentation 0.0.0 documentation</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx_tabs/tabs.css" type="text/css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Open Ephys Plugin API" href="Open-Ephys-Plugin-API.html" />
    <link rel="prev" title="Creating a new plugin" href="Creating-a-new-plugin.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../index.html">
  <img src="../_static/oe_logo_circle.svg" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../User-Manual/index.html">
  User Manual
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index.html">
  Developer Guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../Tutorials/index.html">
  Tutorials
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../FAQ/index.html">
  FAQ
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/open-ephys" rel="noopener" target="_blank" title="GitHub">
            <span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/openephys" rel="noopener" target="_blank" title="Twitter">
            <span><i class="fab fa-twitter-square"></i></span>
            <label class="sr-only">Twitter</label>
          </a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Compiling-the-GUI.html">
   Compiling the GUI
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Compiling-plugins.html">
   Compiling plugins
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Creating-a-new-plugin.html">
   Creating a new plugin
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Adding a new data format
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Open-Ephys-Plugin-API.html">
   Open Ephys Plugin API
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Distributing-plugins.html">
   Distributing plugins
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Modifying-the-host-application.html">
   Modifying the host application
  </a>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#creating-a-new-data-format-repository">
   Creating a new data format repository
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#editing-openephyslib-cpp">
   Editing
   <code class="code docutils literal notranslate">
    <span class="pre">
     OpenEphysLib.cpp
    </span>
   </code>
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#recordengines-plugins">
     <strong>
      RecordEngines
     </strong>
     Plugins
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#filesource-plugins">
     <strong>
      FileSource
     </strong>
     Plugins
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#adding-source-code">
   Adding source code
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#including-external-libraries">
   Including external libraries
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#compiling-your-data-format">
   Compiling your data format
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="adding-a-new-data-format">
<span id="addinganewdataformat"></span><h1>Adding a new data format<a class="headerlink" href="#adding-a-new-data-format" title="Permalink to this headline">¶</a></h1>
<p>In the Open Ephys GUI, data formats are defined within plugins, making it straightforward to add compatibility with alternate formats.</p>
<p>The GUI currently supports four data formats:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../User-Manual/Recording-data/Binary-format.html#binaryformat"><span class="std std-ref">Binary format</span></a> - the default format, based on widely used standards such as NumPy and JSON files.</p></li>
<li><p><a class="reference internal" href="../User-Manual/Recording-data/Open-Ephys-format.html#openephysformat"><span class="std std-ref">Open Ephys format</span></a> - the GUI’s original data format, designed to be highly fault tolerant</p></li>
<li><p><a class="reference internal" href="../User-Manual/Recording-data/NWB-format.html#nwbdataformat"><span class="std std-ref">NWB format</span></a> - the 1.0 specification of the Neurodata Without Borders format (soon to be replaced by the 2.0 spec)</p></li>
<li><p><a class="reference internal" href="../User-Manual/Recording-data/KWIK-format.html#kwikdataformat"><span class="std std-ref">KWIK format</span></a> - the now-deprecated HDF5-based format. This will soon be removed from the GUI, so it’s not recommended for use.</p></li>
</ul>
<p>In order to add a new format for writing by the Record Node, you must define a <strong>RecordEngine</strong> plugin. To add a new format for reading by the File Reader, you must define a <strong>FileSource</strong> plugin.</p>
<p>This page will outline the basic steps for creating a new data format plugin. These instructions assume you have already compiled the main application. If not, follow the instructions on <a class="reference internal" href="Compiling-the-GUI.html#compilingthegui"><span class="std std-ref">this page</span></a>.</p>
<div class="section" id="creating-a-new-data-format-repository">
<h2>Creating a new data format repository<a class="headerlink" href="#creating-a-new-data-format-repository" title="Permalink to this headline">¶</a></h2>
<p>The first step in creating a new data format is to create a repository from the <a class="reference external" href="https://github.com/open-ephys-plugins/OEPlugin">OEPlugin</a> template.</p>
<ol class="arabic simple">
<li><p>Log in to your <a class="reference external" href="https://github.com/">GitHub</a> account.</p></li>
<li><p>Browse to the <a class="reference external" href="https://github.com/open-ephys-plugins/OEPlugin">OEPlugin</a> template repository.</p></li>
<li><p>Click the green “Use this template” button.</p></li>
<li><p>Choose a name for your plugin. It should succinctly capture the plugin’s functionality (and doesn’t need to include the word “plugin”).</p></li>
<li><p>Click the green “Create repository from template” button.</p></li>
</ol>
<p>On your local machine, create an “OEPlugins” directory within the same directory that contains your <code class="code docutils literal notranslate"><span class="pre">plugin-GUI</span></code> repository: Then, using the command line or the <a class="reference external" href="https://desktop.github.com/">GitHub Desktop</a> app, clone your the plugin repository into this new folder. Your directory structure should look something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">code_directory</span><span class="o">/</span>
   <span class="n">plugin</span><span class="o">-</span><span class="n">GUI</span><span class="o">/</span>
   <span class="n">OEPlugins</span><span class="o">/</span>
      <span class="n">NewDataFormat</span><span class="o">/</span>
         <span class="n">Source</span><span class="o">/</span>
         <span class="n">Build</span><span class="o">/</span>
         <span class="n">CMakeLists</span><span class="o">.</span><span class="n">txt</span>
         <span class="n">CMAKE_README</span><span class="o">.</span><span class="n">txt</span>
         <span class="n">README</span><span class="o">.</span><span class="n">md</span>
</pre></div>
</div>
</div>
<div class="section" id="editing-openephyslib-cpp">
<h2>Editing <code class="code docutils literal notranslate"><span class="pre">OpenEphysLib.cpp</span></code><a class="headerlink" href="#editing-openephyslib-cpp" title="Permalink to this headline">¶</a></h2>
<p>Inside the “Source” folder of the plugin repository you just cloned, you’ll find the <code class="code docutils literal notranslate"><span class="pre">OpenEphysLib.cpp</span></code> file that contains critical information about your data format. Open it in your preferred text editor and make the following changes, depending on the type of data format you’re creating:</p>
<div class="section" id="recordengines-plugins">
<h3><strong>RecordEngines</strong> Plugins<a class="headerlink" href="#recordengines-plugins" title="Permalink to this headline">¶</a></h3>
<p>Plugins that write data are <strong>RecordEngines</strong>, meaning they must implement the <code class="code docutils literal notranslate"><span class="pre">writeData()</span></code>, <code class="code docutils literal notranslate"><span class="pre">writeEvent()</span></code>, and <code class="code docutils literal notranslate"><span class="pre">writeSpike()</span></code> methods of <a class="reference external" href="https://github.com/open-ephys/plugin-GUI/blob/master/Source/Processors/RecordNode/RecordEngine.h">RecordEngine.h</a>. These methods are called whenever there is new data to be written to disk. RecordEngine plugins should uncomment and edit the following lines in <code class="code docutils literal notranslate"><span class="pre">OpenEphysLib.cpp</span></code>:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// specifies that we are creating a RecordEngine plugin</span>
<span class="n">info</span><span class="o">-&gt;</span><span class="n">type</span> <span class="o">=</span> <span class="n">Plugin</span><span class="o">::</span><span class="n">PLUGIN_TYPE_RECORD_ENGINE</span><span class="p">;</span>

<span class="c1">// edit to change how your plugin&#39;s name is displayed in the GUI</span>
<span class="n">info</span><span class="o">-&gt;</span><span class="n">recordEngine</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;Record Engine Name&quot;</span><span class="p">;</span>

<span class="c1">// Replace &quot;RecordEngineClassName&quot; with the namespace and class name of your plugin</span>
<span class="n">info</span><span class="o">-&gt;</span><span class="n">recordEngine</span><span class="p">.</span><span class="n">creator</span> <span class="o">=</span> <span class="o">&amp;</span><span class="p">(</span><span class="n">Plugin</span><span class="o">::</span><span class="n">createRecordEngine</span><span class="o">&lt;</span><span class="n">RecordEngineClassName</span><span class="o">&gt;</span><span class="p">);;</span>
</pre></div>
</div>
</div>
<div class="section" id="filesource-plugins">
<h3><strong>FileSource</strong> Plugins<a class="headerlink" href="#filesource-plugins" title="Permalink to this headline">¶</a></h3>
<p><strong>FileSource</strong> plugins define how data should be imported by the File Reader. These plugins must implement the <code class="code docutils literal notranslate"><span class="pre">readData()</span></code> method of <cite>FileSource.h &lt;https://github.com/open-ephys/plugin-GUI/blob/master/Source/Processors/FileReader/FileSource.h&gt;</cite> (among others). FileSource plugins add data to a buffer as it becomes available, which will be automatically copied into the GUI’s signal chain. FileSource plugins should uncomment and edit the following lines in <code class="code docutils literal notranslate"><span class="pre">OpenEphysLib.cpp</span></code>:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// specifies that we are creating a FileSource plugin</span>
<span class="n">info</span><span class="o">-&gt;</span><span class="n">type</span> <span class="o">=</span> <span class="n">Plugin</span><span class="o">::</span><span class="n">PLUGIN_TYPE_FILE_SOURCE</span><span class="p">;;</span>

<span class="c1">// edit to change how your plugin&#39;s name is displayed in the GUI</span>
<span class="n">info</span><span class="o">-&gt;</span><span class="n">fileSource</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;File Source Name&quot;</span><span class="p">;</span>

<span class="c1">//Semicolon separated list of supported extensions. e.g.: &quot;txt;dat;info;kwd&quot;</span>
<span class="n">info</span><span class="o">-&gt;</span><span class="n">fileSource</span><span class="p">.</span><span class="n">extensions</span> <span class="o">=</span> <span class="s">&quot;xxx;xxx;xxx&quot;</span><span class="p">;</span>

<span class="c1">// Replace &quot;FileSourceClassName&quot; with the class name of your plugin</span>
<span class="n">info</span><span class="o">-&gt;</span><span class="n">fileSource</span><span class="p">.</span><span class="n">creator</span> <span class="o">=</span> <span class="o">&amp;</span><span class="p">(</span><span class="n">Plugin</span><span class="o">::</span><span class="n">createFileSource</span><span class="o">&lt;</span><span class="n">FileSourceClassName</span><span class="o">&gt;</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It’s possible for a single repository to contain multiple plugins (e.g., both a RecordEngine and a FileSource for writing/reading a particular format). In this case, make sure you set the value of <code class="code docutils literal notranslate"><span class="pre">NUM_PLUGINS</span></code> to 2, and implement a separate <code class="code docutils literal notranslate"><span class="pre">case</span></code> statement for each plugin.</p>
</div>
</div>
</div>
<div class="section" id="adding-source-code">
<h2>Adding source code<a class="headerlink" href="#adding-source-code" title="Permalink to this headline">¶</a></h2>
<p>Add the data format’s source files to the “Source” directory, or use the included files as a starting point.</p>
<p>If you’re using the template files, choose the header and cpp files corresponding to the type of plugin you’re creating (RecordEngine or FileSource, or both), and delete the rest. You’ll have to find and replace the default class name with the name of your plugin’s class.</p>
<p>By default, CMake will add any files with <strong>.h</strong> or <strong>.cpp</strong> extensions that live in the “Source” directory. If you have files with alternate extensions, you’ll have to edit the following line of <strong>CMakeLists.txt</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">file</span><span class="p">(</span><span class="n">GLOB_RECURSE</span> <span class="n">SRC_FILES</span> <span class="n">LIST_DIRECTORIES</span> <span class="n">false</span> <span class="s2">&quot;$</span><span class="si">{SOURCE_PATH}</span><span class="s2">/*.cpp&quot;</span> <span class="s2">&quot;$</span><span class="si">{SOURCE_PATH}</span><span class="s2">/*.h&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="including-external-libraries">
<h2>Including external libraries<a class="headerlink" href="#including-external-libraries" title="Permalink to this headline">¶</a></h2>
<p>If your plugin depends on external libraries, it is necessary to manually edit the <strong>CMakeLists.txt</strong> file. The relevant lines are commented out at the end of this file.</p>
</div>
<div class="section" id="compiling-your-data-format">
<h2>Compiling your data format<a class="headerlink" href="#compiling-your-data-format" title="Permalink to this headline">¶</a></h2>
<p>Follow the instructions on <a class="reference internal" href="Compiling-plugins.html#compilingplugins"><span class="std std-ref">Compiling plugins</span></a> to build your new data format.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="Creating-a-new-plugin.html" title="previous page">Creating a new plugin</a>
    <a class='right-next' id="next-link" href="Open-Ephys-Plugin-API.html" title="next page">Open Ephys Plugin API</a>

              </div>
              
          </main>
          

      </div>
    </div>
  
  <script src="../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2010-2021, Open Ephys &amp; Contributors.<br/>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.0.2.<br/>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>