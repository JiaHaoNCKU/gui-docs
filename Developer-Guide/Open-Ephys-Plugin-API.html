
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Open Ephys Plugin API &#8212; Open Ephys GUI Docs</title>
    
  <link rel="stylesheet" href="../_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx_tabs/tabs.css" type="text/css" />
    
  <link rel="preload" as="script" href="../_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Distributing plugins" href="Distributing-plugins.html" />
    <link rel="prev" title="Adding a new data format" href="Adding-a-new-data-format.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    <a class="navbar-brand" href="../index.html">
    
      <img src="../_static/oe_logo_circle.svg" class="logo" alt="logo" />
    
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item ">
            <a class="nav-link" href="../User-Manual/index.html">User Manual</a>
        </li>
        
        <li class="nav-item active">
            <a class="nav-link" href="index.html">Developer Guide</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../Tutorials/index.html">Tutorials</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../FAQ/index.html">FAQs</a>
        </li>
        
        
      </ul>


      

      <ul class="navbar-nav">
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/open-ephys" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square"></i></span>
            </a>
          </li>
        
        
          <li class="nav-item">
            <a class="nav-link" href="https://twitter.com/openephys" target="_blank" rel="noopener">
              <span><i class="fab fa-twitter-square"></i></span>
            </a>
          </li>
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

    <div class="bd-toc-item active">
    
  
    <ul class="nav bd-sidenav">
        
        
        
        
          
            
                <li class="">
                    <a href="Compiling-the-GUI.html">Compiling the GUI</a>
                </li>
            
          
            
                <li class="">
                    <a href="Compiling-plugins.html">Compiling plugins</a>
                </li>
            
          
            
                <li class="">
                    <a href="Creating-a-new-plugin.html">Creating a new plugin</a>
                </li>
            
          
            
                <li class="">
                    <a href="Adding-a-new-data-format.html">Adding a new data format</a>
                </li>
            
          
            
                <li class="active">
                    <a href="">Open Ephys Plugin API</a>
                </li>
            
          
            
                <li class="">
                    <a href="Distributing-plugins.html">Distributing plugins</a>
                </li>
            
          
            
                <li class="">
                    <a href="Modifying-the-host-application.html">Modifying the host application</a>
                </li>
            
          
        
        
        
        
        
        
      </ul>
  
  </nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#overview" class="nav-link">Overview</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#building-the-signal-chain" class="nav-link">Building the Signal Chain</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#data-acquisition" class="nav-link">Data Acquisition</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#continuous-data" class="nav-link">Continuous data</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#event-data" class="nav-link">Event data</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#spike-data" class="nav-link">Spike data</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#loading-saving-settings" class="nav-link">Loading/Saving Settings</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#core-services" class="nav-link">Core Services</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#other-features-of-the-plugin-api" class="nav-link">Other features of the Plugin API</a>
        </li>
    
    </ul>
</nav>


              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="open-ephys-plugin-api">
<span id="openephyspluginapi"></span><h1>Open Ephys Plugin API<a class="headerlink" href="#open-ephys-plugin-api" title="Permalink to this headline">¶</a></h1>
<p>The Open Ephys Plugin API consists of all of the classes and methods that can be called by plugins. The Plugin API defines how plugins can interact with the rest of the GUI, and also provides some convenient functions for building user interfaces and processing data. Classes and methods that are part of the Plugin API are indicated by the <code class="code docutils literal notranslate"><span class="pre">PLUGIN_API</span></code> macro.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This documentation is focused on “Processor” plugins, which inherit from the <code class="code docutils literal notranslate"><span class="pre">GenericProcessor</span></code> class. Not all of the methods described below are available to other types of plugins, such as DataThreads, RecordEngines, and FileSources.</p>
</div>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>There are three primary situations in which information is transferred in/out of plugins:</p>
<ol class="arabic simple">
<li><p>while building the signal chain</p></li>
<li><p>during acquisition</p></li>
<li><p>when loading/saving settings.</p></li>
</ol>
<p>In each of these situations, there are three primary types of data that can be handled by plugins:</p>
<ol class="arabic simple">
<li><p>continuous data</p></li>
<li><p>events</p></li>
<li><p>spikes</p></li>
</ol>
<p>This guide will cover the main methods that plugins can use to handle continuous, event, and spike data under the three situations listed above.</p>
</div>
<div class="section" id="building-the-signal-chain">
<h2>Building the Signal Chain<a class="headerlink" href="#building-the-signal-chain" title="Permalink to this headline">¶</a></h2>
<p>When your plugin is dropped into the signal chain, the GUI will call <code class="code docutils literal notranslate"><span class="pre">GenericProcessor::update()</span></code> to update its settings. This will automatically copy all of the settings from the upstream plugin into three “channel info” arrays:</p>
<ol class="arabic simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">dataChannelArray</span></code></p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">eventChannelArray</span></code></p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">spikeChannelArray</span></code></p></li>
</ol>
<p>The GUI will then call <code class="code docutils literal notranslate"><span class="pre">createEventChannels()</span></code> and <code class="code docutils literal notranslate"><span class="pre">createSpikeChannels()</span></code>, to allow the plugin to optionally append its own <code class="code docutils literal notranslate"><span class="pre">EventChannel</span></code> or <code class="code docutils literal notranslate"><span class="pre">SpikeChannel</span></code> objects to these arrays. The plugin should override these methods if it generates event or spike data.</p>
<p>Finally, the GUI will call <code class="code docutils literal notranslate"><span class="pre">GenericProcessor::updateSettings()</span></code>, which allows the plugin to edit its channel objects. For example, a plugin could change the name of a data channel, re-order channels, or add metadata to a channel object. Note that updating these channel objects is the <em>only</em> way that a plugin can communicate its settings to downstream plugins. Any local settings that are not applied to these channel objects will not be visible to other plugins.</p>
<p>There are three types of continuous channels that plugins will encounter:</p>
<ol class="arabic simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">DATA</span></code> - default continuous channel type, typically used to represent a voltage trace recorded from an electrode implanted in the brain. Data is stored in <code class="code docutils literal notranslate"><span class="pre">float</span></code> format, in units of <strong>microvolts</strong>.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">AUX</span></code> - auxiliary data channel, typically used for sensors mounted on a subject’s head (such as an accelerometer). Data is stored in <code class="code docutils literal notranslate"><span class="pre">float</span></code> format, in arbitrary units.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">ADC</span></code> - generic analog-to-digital converter channel, typically used for non-head-mounted analog inputs. Data is stored in <code class="code docutils literal notranslate"><span class="pre">float</span></code> format, in units of <strong>volts</strong>.</p></li>
</ol>
<p>There are also three types of event channels:</p>
<ol class="arabic simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">TTL</span></code> - the most common event channel type, representing a set of digital bits that flip between on and off states</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">TEXT</span></code> - an event channel that carries text strings</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">BINARY</span></code> - an event channel that transmits user-defined blobs of binary data (not commonly used)</p></li>
</ol>
<p>Finally, there are three types of spike channels:</p>
<ol class="arabic simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">SINGLE</span></code> - a spike channel associated with a single continuous channel</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">STEREOTRODE</span></code> - a spike channel associated with two continuous channels</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">TETRODE</span></code> - a spike channel associated with four continuous channels</p></li>
</ol>
</div>
<div class="section" id="data-acquisition">
<h2>Data Acquisition<a class="headerlink" href="#data-acquisition" title="Permalink to this headline">¶</a></h2>
<div class="section" id="continuous-data">
<h3>Continuous data<a class="headerlink" href="#continuous-data" title="Permalink to this headline">¶</a></h3>
<p>When data acquisition is active, the GUI will call each plugin’s <code class="code docutils literal notranslate"><span class="pre">GenericProcessor::process()</span></code> whenever a new data buffer is available. Within this method, the plugin can interact with the continuous data buffer using the following methods:</p>
<dl class="cpp function">
<dt id="_CPPv413getNumSamplesi">
<span id="_CPPv313getNumSamplesi"></span><span id="_CPPv213getNumSamplesi"></span><span id="getNumSamples__i"></span>int <code class="sig-name descname">getNumSamples</code><span class="sig-paren">(</span>int <em>channelIndex</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv413getNumSamplesi" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns the number of samples available for a given channel. Must be called
on a per-channel basis, because channels from different subprocessors are
not guaranteed to have the same number of samples in each buffer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>channelIndex</strong> – The index of the continuous data channel to check.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The number of samples available in the current buffer for the specified channel.</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>See the <a class="reference external" href="https://github.com/open-ephys/plugin-GUI/blob/ebf64f5fc89dee3cb452eb92f9fb63e04d8a68d0/Plugins/FilterNode/FilterNode.cpp#L260-L270">FilterNode::process()</a> method.</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv414getReadPointeri">
<span id="_CPPv314getReadPointeri"></span><span id="_CPPv214getReadPointeri"></span><span id="getReadPointer__i"></span>float *<code class="sig-name descname">getReadPointer</code><span class="sig-paren">(</span>int <em>channelIndex</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv414getReadPointeri" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns a pointer to the data for one channel; only use this if the plugin will not overwrite the continuous data buffer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>channelIndex</strong> – The index of the continuous data channel to access.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A pointer to the continuous data.</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>See the <a class="reference external" href="https://github.com/open-ephys/plugin-GUI/blob/ebf64f5fc89dee3cb452eb92f9fb63e04d8a68d0/Plugins/PhaseDetector/PhaseDetector.cpp#L241">PhaseDetector::process()</a> method.</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv415getWritePointeri">
<span id="_CPPv315getWritePointeri"></span><span id="_CPPv215getWritePointeri"></span><span id="getWritePointer__i"></span>float *<code class="sig-name descname">getWritePointer</code><span class="sig-paren">(</span>int <em>channelIndex</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv415getWritePointeri" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns a pointer to the data for one channel; only use this if the plugin will overwrite the continuous data buffer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>channelIndex</strong> – The index of the continuous data channel to modify.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A pointer to the continuous data.</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>See the <a class="reference external" href="https://github.com/open-ephys/plugin-GUI/blob/ebf64f5fc89dee3cb452eb92f9fb63e04d8a68d0/Plugins/FilterNode/FilterNode.cpp#L260-L270">FilterNode::process()</a> method.</p>
</dd>
</dl>
</dd></dl>

<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>To avoid returning invalid data (or a segmentational fault), never try to access more samples than are returned by the <code class="code docutils literal notranslate"><span class="pre">getNumSamples()</span></code> method for a particular channel.</p>
</div>
</div>
<div class="section" id="event-data">
<h3>Event data<a class="headerlink" href="#event-data" title="Permalink to this headline">¶</a></h3>
<p>If your plugin needs to respond to incoming events, it should call the following method at the beginning of the <code class="code docutils literal notranslate"><span class="pre">process()</span></code> callback:</p>
<dl class="cpp function">
<dt id="_CPPv414checkForEventsb">
<span id="_CPPv314checkForEventsb"></span><span id="_CPPv214checkForEventsb"></span><span id="checkForEvents__b"></span>void <code class="sig-name descname">checkForEvents</code><span class="sig-paren">(</span>bool <em>respondToSpikes</em> = false<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv414checkForEventsb" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Indicates that this plugin needs access to the events within the current buffer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>respondToSpikes</strong> – Set to <code class="code docutils literal notranslate"><span class="pre">true</span></code> if the plugin needs to process incoming spikes. Defaults to <code class="code docutils literal notranslate"><span class="pre">false</span></code>.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p>See the <a class="reference external" href="https://github.com/open-ephys/plugin-GUI/blob/ebf64f5fc89dee3cb452eb92f9fb63e04d8a68d0/Plugins/ArduinoOutput/ArduinoOutput.cpp#L201-L204">ArduinoOutput::process()</a> method.</p>
</dd>
</dl>
</dd></dl>

<p>Override the following <code class="code docutils literal notranslate"><span class="pre">GenericProcessor</span></code> method to respond to events:</p>
<dl class="cpp function">
<dt id="_CPPv411handleEventPK12EventChannelRK11MidiMessagei">
<span id="_CPPv311handleEventPK12EventChannelRK11MidiMessagei"></span><span id="_CPPv211handleEventPK12EventChannelRK11MidiMessagei"></span><span id="handleEvent__EventChannelCP.MidiMessageCR.i"></span>void <code class="sig-name descname">handleEvent</code><span class="sig-paren">(</span><em class="property">const</em> EventChannel *<em>eventChannel</em>, <em class="property">const</em> MidiMessage &amp;<em>event</em>, int <em>samplePosition</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv411handleEventPK12EventChannelRK11MidiMessagei" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Passes the next available incoming event to the plugin.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eventChannel</strong> – Pointer to the EventChannel object containing information about the channel that generated this event.</p></li>
<li><p><strong>event</strong> – MidiMessage object that holds the event data.</p></li>
<li><p><strong>samplePosition</strong> – The sample within the current continuous buffer at which the event occurred.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p>See the <a class="reference external" href="https://github.com/open-ephys/plugin-GUI/blob/ebf64f5fc89dee3cb452eb92f9fb63e04d8a68d0/Plugins/ArduinoOutput/ArduinoOutput.cpp#L101-L138">ArduinoOutput::handleEvent()</a> method.</p>
</dd>
</dl>
</dd></dl>

<p>To add an event inside the <code class="code docutils literal notranslate"><span class="pre">process()</span></code> loop, call the following method:</p>
<dl class="cpp function">
<dt id="_CPPv48addEventPK12EventChannelRK11MidiMessagei">
<span id="_CPPv38addEventPK12EventChannelRK11MidiMessagei"></span><span id="_CPPv28addEventPK12EventChannelRK11MidiMessagei"></span><span id="addEvent__EventChannelCP.MidiMessageCR.i"></span>void <code class="sig-name descname">addEvent</code><span class="sig-paren">(</span><em class="property">const</em> EventChannel *<em>eventChannel</em>, <em class="property">const</em> MidiMessage &amp;<em>event</em>, int <em>samplePosition</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv48addEventPK12EventChannelRK11MidiMessagei" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Adds an event on the specified channel, which will be seen by downstream plugins.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eventChannel</strong> – Pointer to the EventChannel object containing information about the channel that generated this event.</p></li>
<li><p><strong>event</strong> – MidiMessage object that holds the event data.</p></li>
<li><p><strong>samplePosition</strong> – The sample within the current continuous buffer at which the event occurred.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p>See the <a class="reference external" href="https://github.com/open-ephys/plugin-GUI/blob/ebf64f5fc89dee3cb452eb92f9fb63e04d8a68d0/Plugins/PhaseDetector/PhaseDetector.cpp#L247-L254">PhaseDetector::process()</a> method.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="spike-data">
<h3>Spike data<a class="headerlink" href="#spike-data" title="Permalink to this headline">¶</a></h3>
<p>Assuming <code class="code docutils literal notranslate"><span class="pre">checkForEvents(true)</span></code> has already been called, override the following <code class="code docutils literal notranslate"><span class="pre">GenericProcessor</span></code> method to respond to spikes:</p>
<dl class="cpp function">
<dt id="_CPPv411handleSpikePK12SpikeChannelRK11MidiMessagei">
<span id="_CPPv311handleSpikePK12SpikeChannelRK11MidiMessagei"></span><span id="_CPPv211handleSpikePK12SpikeChannelRK11MidiMessagei"></span><span id="handleSpike__SpikeChannelCP.MidiMessageCR.i"></span>void <code class="sig-name descname">handleSpike</code><span class="sig-paren">(</span><em class="property">const</em> SpikeChannel *<em>spikeChannel</em>, <em class="property">const</em> MidiMessage &amp;<em>event</em>, int <em>samplePosition</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv411handleSpikePK12SpikeChannelRK11MidiMessagei" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Passes the next available spike to the plugin.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>spikeChannel</strong> – Pointer to the SpikeChannel object containing information about the channel that generated this event.</p></li>
<li><p><strong>event</strong> – MidiMessage object that holds the spike data.</p></li>
<li><p><strong>samplePosition</strong> – The sample within the current continuous buffer at which the spike occurred.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p>See the <a class="reference external" href="https://github.com/open-ephys/plugin-GUI/blob/ebf64f5fc89dee3cb452eb92f9fb63e04d8a68d0/Plugins/EvntTrigAvg/EvntTrigAvg.cpp#L190-L231">EventTrigAvg::handleSpike()</a> method.</p>
</dd>
</dl>
</dd></dl>

<p>To add a spike inside the <code class="code docutils literal notranslate"><span class="pre">process()</span></code> loop, call the following method:</p>
<dl class="cpp function">
<dt id="_CPPv48addSpikePK12SpikeChannelPK10SpikeEventi">
<span id="_CPPv38addSpikePK12SpikeChannelPK10SpikeEventi"></span><span id="_CPPv28addSpikePK12SpikeChannelPK10SpikeEventi"></span><span id="addSpike__SpikeChannelCP.SpikeEventCP.i"></span>void <code class="sig-name descname">addSpike</code><span class="sig-paren">(</span><em class="property">const</em> SpikeChannel *<em>spikeChannel</em>, <em class="property">const</em> SpikeEvent *<em>spike</em>, int <em>samplePosition</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv48addSpikePK12SpikeChannelPK10SpikeEventi" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Indicates that this plugin needs access to the events within the current buffer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>spikeChannel</strong> – Pointer to the SpikeChannel object containing information about the channel that generated this spike.</p></li>
<li><p><strong>spike</strong> – SpikeEvent object that holds the spike data.</p></li>
<li><p><strong>samplePosition</strong> – The sample within the current continuous buffer at which the spike occurred.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p>See the <a class="reference external" href="https://github.com/open-ephys/plugin-GUI/blob/ebf64f5fc89dee3cb452eb92f9fb63e04d8a68d0/Plugins/SpikeSorter/SpikeSorter.cpp#L988-L990">SpikeSorter::process()</a> method.</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="loading-saving-settings">
<h2>Loading/Saving Settings<a class="headerlink" href="#loading-saving-settings" title="Permalink to this headline">¶</a></h2>
<p>The GUI saves the signal chain in the following situations:</p>
<ol class="arabic simple">
<li><p>Whenever a processor is added, moved, or deleted, the signal chain is written to <code class="code docutils literal notranslate"><span class="pre">recoveryConfig.xml</span></code></p></li>
<li><p>Whenever a recording is started, the signal channel is written to <code class="code docutils literal notranslate"><span class="pre">settings.xml</span></code> inside each Record Node directory</p></li>
<li><p>Whenever the GUI is closed, the signal chain is written to <code class="code docutils literal notranslate"><span class="pre">lastConfig.xml</span></code></p></li>
<li><p>Whenever the signal chain is cleared, the previous state is stored in memory so this action can be done.</p></li>
</ol>
<p>In addition, the settings for individual plugins are stored in memory whenever a plugin is copied.</p>
<p>In order to make sure its settings can be appropriately saved and restored, a plugin must override the following <code class="code docutils literal notranslate"><span class="pre">GenericProcessor</span></code> methods:</p>
<dl class="cpp function">
<dt id="_CPPv427loadCustomParametersFromXmlv">
<span id="_CPPv327loadCustomParametersFromXmlv"></span><span id="_CPPv227loadCustomParametersFromXmlv"></span><span id="loadCustomParametersFromXml"></span>void <code class="sig-name descname">loadCustomParametersFromXml</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv427loadCustomParametersFromXmlv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>This method allows a plugin to restore its settings from its <code class="code docutils literal notranslate"><span class="pre">parametersAsXml</span></code> member.</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>See the <a class="reference external" href="https://github.com/open-ephys/plugin-GUI/blob/ea57b8a14f3c3231a0c96ede61d62119b59cc6a5/Plugins/PulsePalOutput/PulsePalOutput.cpp#L463-L510">PulsePalOutput::loadCustomParametersFromXml()</a> method.</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv425saveCustomParametersToXmlP10XmlElement">
<span id="_CPPv325saveCustomParametersToXmlP10XmlElement"></span><span id="_CPPv225saveCustomParametersToXmlP10XmlElement"></span><span id="saveCustomParametersToXml__XmlElementP"></span>void <code class="sig-name descname">saveCustomParametersToXml</code><span class="sig-paren">(</span>XmlElement *<em>parentElement</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv425saveCustomParametersToXmlP10XmlElement" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>This method allows a plugin to save its settings to an <a class="reference external" href="https://docs.juce.com/master/classXmlElement.html">XmlElement</a> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>parentElement</strong> – The XmlElement containing the plugin’s settings (assuming <code class="code docutils literal notranslate"><span class="pre">loadCustomParametersFromXml</span></code> has been implemented.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p>See the <a class="reference external" href="https://github.com/open-ephys/plugin-GUI/blob/ea57b8a14f3c3231a0c96ede61d62119b59cc6a5/Plugins/PulsePalOutput/PulsePalOutput.cpp#L436-L461">PulsePalOutput::saveCustomParametersToXml()</a> method.</p>
</dd>
</dl>
</dd></dl>

<p>Plugins can also save and load settings via their editors, by overriding the <code class="code docutils literal notranslate"><span class="pre">GenericEditor::saveCustomParameters()</span></code> and <code class="code docutils literal notranslate"><span class="pre">GenericEditor::loadCustomParameters()</span></code> methods.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Plugins that include a visualizer must use a different set of methods for loading/saving settings from their editors: <code class="code docutils literal notranslate"><span class="pre">VisualizerEditor::saveVisualizerParameters()</span></code> and <code class="code docutils literal notranslate"><span class="pre">VisualizerEditor::loadVisualizerParameters()</span></code> methods.</p>
</div>
</div>
<div class="section" id="core-services">
<h2>Core Services<a class="headerlink" href="#core-services" title="Permalink to this headline">¶</a></h2>
<p>Plugins also have access to the methods defined in <a class="reference external" href="https://github.com/open-ephys/plugin-GUI/blob/master/Source/CoreServices.h">CoreServices.h</a>. Two of the most commonly used ones are documented below. See the source code for a complete list of available methods.</p>
<dl class="cpp function">
<dt id="_CPPv417sendStatusMessageR6String">
<span id="_CPPv317sendStatusMessageR6String"></span><span id="_CPPv217sendStatusMessageR6String"></span><span id="sendStatusMessage__StringR"></span>void <code class="sig-name descname">sendStatusMessage</code><span class="sig-paren">(</span>String &amp;<em>messageText</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv417sendStatusMessageR6String" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Sends a status message to the user, which will appear in the Message Center at the bottom of the GUI window.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>messageText</strong> – The message to be displayed.</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv417updateSignalChainP13GenericEditor">
<span id="_CPPv317updateSignalChainP13GenericEditor"></span><span id="_CPPv217updateSignalChainP13GenericEditor"></span><span id="updateSignalChain__GenericEditorP"></span>void <code class="sig-name descname">updateSignalChain</code><span class="sig-paren">(</span>GenericEditor *<em>editor</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv417updateSignalChainP13GenericEditor" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Indicates that downstream plugins need to be notified about new settings. For example, this should be called when a plugin adds or removes a spike channel, event channel, or data channel; adds metadata to a channel; or changes its “enabled” status.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>editor</strong> – A pointer to the plugin’s editor.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="other-features-of-the-plugin-api">
<h2>Other features of the Plugin API<a class="headerlink" href="#other-features-of-the-plugin-api" title="Permalink to this headline">¶</a></h2>
<p>The Plugin API includes convenient classes for building user interfaces, such as buttons, icons, sliders, and simple line plots. See the <code class="code docutils literal notranslate"><span class="pre">Source/Processors/Editors</span></code> and the <code class="code docutils literal notranslate"><span class="pre">Source/Processors/Visualization</span></code> directories for more information.</p>
<p>In addition, plugins can access a wide range of digital filters from an <a class="reference external" href="https://github.com/vinniefalco/DSPFilters">MIT-licensed DSP library</a>. See the <code class="code docutils literal notranslate"><span class="pre">Source/Processors/Dsp</span></code> directory for a complete list, and check out the <a class="reference external" href="https://github.com/open-ephys/plugin-GUI/tree/master/Plugins/FilterNode">FilterNode</a> for an example of how these can be used.</p>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="Adding-a-new-data-format.html" title="previous page">Adding a new data format</a>
    <a class='right-next' id="next-link" href="Distributing-plugins.html" title="next page">Distributing plugins</a>

              </div>
              
          </main>
          

      </div>
    </div>

    
  <script src="../_static/js/index.3da636dd464baa7582d2.js"></script>


    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2010-2021, Open Ephys &amp; Contributors.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.3.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>